(this["webpackJsonpcalendar-ts"]=this["webpackJsonpcalendar-ts"]||[]).push([[0],{168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(24),r=a.n(c),i=a(3),o=a(18),d=a(57),l=a(4);var u=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},m="SET_AUTH_USER",j="SET_LOADED",b={isAuthenticated:!1,isLoaded:!1,user:{}};var h=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_=[31,28,31,30,31,30,31,31,30,31,30,31],p="^(?=\\d{2}([\\/])\\d{2}\\1\\d{4}$)(?:0[1-9]|1\\d|[2][0-8]|29(?!.02.(?!(?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)\\d{2}(?:[02468][048]|[13579][26])))|30(?!.02)|31(?=.(?:0[13578]|10|12))).(?:0[1-9]|1[012]).\\d{4}$",g="https://my-cool-project-123.herokuapp.com",f="admin",x="user",v="viewer",N="ADD",w="UPDATE",y="VIEW";var D=function(e,t){for(var a=[],s=new Date(e,t),n=function(e){var t=e.getMonth();return function(e){return!(e%4||!(e%100)&&e%400)}(e.getFullYear())&&1===t?_[t]+1:_[t]}(s),c=function(e){var t=e.getDay();return 0===t?6:t-1}(s),r=1,i=0;i<(n+c)/7;i++){a[i]=[];for(var o=0;o<7;o++)a[i][o]=0===i&&o<c?{date:new Date(e,t,r-(c-o)),isCurrentMonth:!1}:r>n?{date:new Date(e,t,r++),isCurrentMonth:!1}:{date:new Date(e,t,r++),isCurrentMonth:!0}}return a},k="SET_ALL_START_DATES",S="UPDATE_DATA_MONTH",E="SET_CURRENT_HOUR",T="UPDATE_SELECTED_DATE",C={data:null,basicDate:null,currentDate:null,currentHour:null,selectedWeek:null,selectedDate:null,idSelectedDate:null};var P="SET_ALL_MESSAGES",A={isNoMessages:!1,isLoadedMessages:!1,messages:[]};var M="SET_ALL_USERS",L={isLoaded:!1,users:[]};var U="OPEN_MODAL",F="CLOSE_MODAL",I={isOpenModal:!1,modalType:null};var H=Object(o.c)({calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(l.a)(Object(l.a)({},e),{},{data:D(t.payload.getFullYear(),t.payload.getMonth()),currentDate:t.payload,basicDate:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{data:D(t.payload.getFullYear(),t.payload.getMonth()),basicDate:t.payload});case E:return Object(l.a)(Object(l.a)({},e),{},{currentHour:t.payload});case T:return Object(l.a)(Object(l.a)({},e),{},{selectedDate:t.payload,idSelectedDate:t.payload.getTime()});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(l.a)(Object(l.a)({},e),{},{isOpenModal:!0,modalType:t.payload});case F:return I;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!u(t.payload),user:t.payload});case j:return Object(l.a)(Object(l.a)({},e),{},{isLoaded:t.payload});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(l.a)(Object(l.a)({},e),{},{isNoMessages:u(t.payload),isLoadedMessages:!0,messages:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(l.a)(Object(l.a)({},e),{},{isLoaded:!0,users:t.payload});default:return e}}}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,B=Object(o.e)(H,q(Object(o.a)(d.a))),R=a(7),Y=a.n(R),V=a(20),J=a(9),W=a(8),X=a(0),$=function(){return Object(X.jsx)("div",{className:"landing",children:Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsx)("div",{className:"landing__wrapper",children:Object(X.jsxs)("div",{className:"landing__group",children:[Object(X.jsx)("h1",{className:"landing__title",children:"Calendar"}),Object(X.jsx)(J.b,{to:"/calendar",className:"button button__add",children:"get started"})]})})})})},z=a(6);function G(e){return{type:m,payload:e}}function K(e){return{type:j,payload:e}}var Q=function(e){return{type:U,payload:e}},Z=function(){return{type:F}},ee=function(){return function(e){Y.a.get("".concat(g,"/messages?_sort=id&_order=desc")).then((function(t){var a=t.data;e(function(e){return{type:P,payload:e}}(a))}))}};function te(e){return{type:E,payload:e}}function ae(e){return{type:T,payload:e}}function se(e){return{type:S,payload:e}}var ne=function(e){var t=e.children,a=Object(i.c)((function(e){return e.auth})).isLoaded,s=Object(i.b)();return n.a.useEffect((function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return s(function(e){return{type:k,payload:e}}(t)),s(ee()),setTimeout((function(){return s(K(!0))}),1e3),function(){return s(K(!1))}}),[s]),Object(X.jsx)(n.a.Fragment,{children:a?t:Object(X.jsx)(Re,{})})},ce=a(12),re=a(10),ie=a.n(re);var oe=function(e){var t={};return ie.a.isEmail(e.email)||(t.email="Email entered incorrectly"),ie.a.isEmpty(e.email)&&(t.email="Enter your email"),ie.a.isLength(e.password,{min:6,max:30})||(t.password="The password must be at least 6 characters long"),ie.a.isEmpty(e.password)&&(t.password="Enter password"),{errors:t,isValid:u(t)}};var de=function(e){Y.a.defaults.headers.common.Authorization=e||null},le=function(e){var t=e.handleToggleButtonClick,a=e.registerUserEmail,s=Object(i.b)(),c=n.a.useState({email:"",password:""}),r=Object(z.a)(c,2),o=r[0],d=r[1],u=n.a.useState({}),m=Object(z.a)(u,2),j=m[0],b=m[1],h=function(e){d(Object(l.a)(Object(l.a)({},o),{},Object(ce.a)({},e.target.name,e.target.value))),b(Object(l.a)(Object(l.a)({},j),{},Object(ce.a)({request:""},e.target.name,"")))};n.a.useEffect((function(){a&&d(Object(l.a)(Object(l.a)({},o),{},{email:a}))}),[a]);return Object(X.jsxs)("form",{className:"sign-in-form",onSubmit:function(e){e.preventDefault();var t=oe(o),a=t.isValid,n=t.errors;a?Y.a.post("".concat(g,"/signin"),o).then((function(e){var t=e.data.accessToken;localStorage.setItem("accessToken",t),de(t);var a=Object(V.a)(t).sub;Y.a.get("".concat(g,"/data-users/").concat(a)).then((function(e){return s(G(e.data))}))})).catch((function(e){b({request:e.response.data})})):b(n)},children:[Object(X.jsx)("h2",{className:"sign-in-form__title",children:"Sign In"}),Object(X.jsx)("div",{className:"sign-in-form__error-request-feedback",children:j.request&&j.request}),Object(X.jsxs)("div",{className:"sign-in-form__group",children:[Object(X.jsx)("input",{type:"text",placeholder:"Email",className:"input sign-in-form__input",name:"email",value:o.email,onChange:h}),Object(X.jsx)("div",{className:"sign-in-form__error-feedback",children:j.email&&j.email})]}),Object(X.jsxs)("div",{className:"sign-in-form__group",children:[Object(X.jsx)("input",{type:"password",placeholder:"Password",className:"input sign-in-form__input",name:"password",value:o.password,onChange:h}),Object(X.jsx)("div",{className:"sign-in-form__error-feedback",children:j.password&&j.password})]}),Object(X.jsxs)("div",{className:"sign-in-form__group-buttons",children:[Object(X.jsx)("button",{type:"submit",className:"button button__prim",children:"Sign In"}),Object(X.jsxs)("p",{className:"sign-in-form__group-buttons-text",children:["You are new? ",Object(X.jsx)("span",{onClick:t,children:"Create new"})]})]})]})};var ue=function(e,t){return{id:t,name:e.name,email:e.email,role:x}};var me=function(e){var t={};return ie.a.isLength(e.name,{min:2,max:30})||(t.name="Name must be between 2 and 30 characters"),ie.a.isEmpty(e.name)&&(t.name="Enter your name"),ie.a.isEmail(e.email)||(t.email="Email entered incorrectly"),ie.a.isEmpty(e.email)&&(t.email="Enter your email"),ie.a.isLength(e.password,{min:6,max:30})||(t.password="The password must be at least 6 characters long"),ie.a.isEmpty(e.password)&&(t.password="Enter password"),ie.a.isLength(e.password_confirmed,{min:6,max:30})||(t.password_confirmed="The password must be at least 6 characters long"),ie.a.equals(e.password,e.password_confirmed)||(t.password_confirmed="Password and confirm password must match"),ie.a.isEmpty(e.password_confirmed)&&(t.password_confirmed="Enter password"),{errors:t,isValid:u(t)}},je=function(e){var t=e.handleToggleButtonClick,a=e.setRegisterUserEmail,s=n.a.useState({name:"",email:"",password:"",password_confirmed:""}),c=Object(z.a)(s,2),r=c[0],i=c[1],o=n.a.useState({}),d=Object(z.a)(o,2),u=d[0],m=d[1],j=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(ce.a)({},e.target.name,e.target.value))),m(Object(l.a)(Object(l.a)({},u),{},Object(ce.a)({request:""},e.target.name,"")))};n.a.useEffect((function(){a("")}),[a]);return Object(X.jsxs)("form",{className:"sign-up-form",onSubmit:function(e){e.preventDefault();var s=me(r),n=s.isValid,c=s.errors;if(n){var i={email:r.email,password:r.password};Y.a.post("".concat(g,"/signup"),i).then((function(e){var t=e.data.accessToken,a=+Object(V.a)(t).sub,s=ue(r,a);Y.a.post("".concat(g,"/data-users"),s).catch((function(e){return m({request:e.response.data})}))})).then((function(){t(),a(i.email)})).catch((function(e){return m({request:e.response.data})}))}else m(c)},children:[Object(X.jsx)("h2",{className:"sign-up-form__title",children:"Sign Up"}),Object(X.jsx)("div",{className:"sign-up-form__error-request-feedback",children:u.request&&u.request}),Object(X.jsxs)("div",{className:"sign-up-form__group",children:[Object(X.jsx)("input",{type:"text",placeholder:"Name",className:"input sign-up-form__input",name:"name",value:r.name,onChange:j}),Object(X.jsx)("div",{className:"sign-up-form__error-feedback",children:u.name&&u.name})]}),Object(X.jsxs)("div",{className:"sign-up-form__group",children:[Object(X.jsx)("input",{type:"text",placeholder:"Email",className:"input sign-up-form__input",name:"email",value:r.email,onChange:j}),Object(X.jsx)("div",{className:"sign-up-form__error-feedback",children:u.email&&u.email})]}),Object(X.jsxs)("div",{className:"sign-up-form__group",children:[Object(X.jsx)("input",{type:"password",placeholder:"Password",className:"input sign-up-form__input",name:"password",value:r.password,onChange:j}),Object(X.jsx)("div",{className:"sign-up-form__error-feedback",children:u.password&&u.password})]}),Object(X.jsxs)("div",{className:"sign-up-form__group",children:[Object(X.jsx)("input",{type:"password",placeholder:"Password confirmed",className:"input sign-up-form__input",name:"password_confirmed",value:r.password_confirmed,onChange:j}),Object(X.jsx)("div",{className:"sign-up-form__error-feedback",children:u.password_confirmed&&u.password_confirmed})]}),Object(X.jsxs)("div",{className:"sign-up-form__group-buttons",children:[Object(X.jsx)("button",{type:"submit",className:"button button__prim",children:"Sign Up"}),Object(X.jsxs)("p",{className:"sign-up-form__group-buttons-text",children:["Already have account? ",Object(X.jsx)("span",{onClick:t,children:"Login"})]})]})]})};var be=function(e){return e>=10?"".concat(e,":00"):"0".concat(e,":00")},he=function(e){var t=e.groupId,a=e.message,s=a.message,c=a.email,r=a.currentHour,o=a.role,d=a.userId,l=Object(i.c)((function(e){return e.auth.user})).id,m=Object(i.c)((function(e){return e.auth.user.role})),j=Object(i.c)((function(e){return e.messages})).messages,b=Object(i.c)((function(e){return e.calendar})).idSelectedDate,h=Object(i.b)(),O=function(e){if(t){var a=new Date(t);h(ae(a))}h(te(r)),h(Q(e))};return Object(X.jsxs)("div",{className:"card-message border_bottom",children:[Object(X.jsx)("h3",{className:"card-message__time",children:be(r)}),Object(X.jsx)("div",{className:"card-message__marker card-message__marker_".concat(o),children:o[0]}),Object(X.jsx)("h4",{className:"card-message__email",children:c}),Object(X.jsx)("div",{className:"card-message__message",children:s}),Object(X.jsxs)("div",{className:"card-message__buttons",children:[Object(X.jsx)("button",{className:"button button__prim",onClick:function(){return O(y)},children:"View"}),l===d&&v!==m&&Object(X.jsxs)(n.a.Fragment,{children:[Object(X.jsx)("button",{className:"button button__prim",onClick:function(){return O(w)},children:"Update"}),Object(X.jsx)("button",{className:"button button__prim",onClick:function(){var e=t||b,a=j.find((function(t){return t.id===e}));a.messages[r]=null,!u(a.messages.filter((function(e){return e})))?Y.a.put("".concat(g,"/messages/").concat(e),a).then((function(){h(ee())})):Y.a.delete("".concat(g,"/messages/").concat(e)).then((function(){h(ee())}))},children:"Remove"})]})]})]})};var Oe=function(e){var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return"".concat(n<10?"0"+n:n,"-").concat(s<10?"0"+s:s,"-").concat(a)},_e=function(e){var t=e.currentHour,a=Object(i.c)((function(e){return e.auth.user})).role,s=Object(i.b)();return Object(X.jsxs)("div",{className:"card-message border_bottom",children:[Object(X.jsx)("h3",{className:"card-message__time",children:be(t)}),Object(X.jsx)("div",{className:"card-message__message",children:"Add note..."}),Object(X.jsx)("div",{className:"card-message__buttons",children:v!==a&&Object(X.jsx)("button",{className:"button button__prim",onClick:function(){s(te(t)),s(Q(N))},children:"Add"})})]})},pe=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.idSelectedDate,a=e.selectedDate,s=Object(i.c)((function(e){return e.messages})).messages.find((function(e){return e.id===t}));return Object(X.jsxs)("div",{className:"day-list",children:[Object(X.jsx)("div",{className:"day-list__header border_bottom",children:Object(X.jsx)("div",{className:"day-list__day-name",children:Oe(a.getTime())})}),Object(X.jsxs)("div",{className:"day-list__group",children:[s&&s.messages.map((function(e,t){return e?Object(X.jsx)(he,{message:e},t):Object(X.jsx)(_e,{currentHour:t},t)})),!s&&Array(24).fill(null).map((function(e,t){return Object(X.jsx)(_e,{currentHour:t},t)}))]})]})},ge=function(e){var t=e.group;return Object(X.jsxs)("div",{className:"segment-group",children:[Object(X.jsx)("h3",{className:"segment-group__date",children:Oe(t.id)}),t.messages.map((function(e,a){return e&&Object(X.jsx)(he,{message:e,groupId:t.id},a)}))]})};var fe=function(e){return e};var xe=function(e){var t={};return e.startParam.match(p)||(t.startParam="Date entered in the wrong format"),e.endParam.match(p)||(t.endParam="Date entered in the wrong format"),u(e.startParam)&&(t.startParam="Enter the date"),u(e.endParam)&&(t.endParam="Enter the date"),{errors:t,isValid:u(t)}},ve=function(){var e=Object(i.c)((function(e){return e.messages})),t=e.isNoMessages,a=e.messages,s=n.a.useState(a),c=Object(z.a)(s,2),r=c[0],o=c[1],d=n.a.useState({}),u=Object(z.a)(d,2),m=u[0],j=u[1],b=n.a.useState({startParam:"",endParam:""}),h=Object(z.a)(b,2),O=h[0],_=h[1];n.a.useEffect((function(){o(a)}),[a]);var p=function(e){var t;_(Object(l.a)(Object(l.a)({},O),{},Object(ce.a)({},e.target.name,fe(e.target.value)))),j(Object(l.a)(Object(l.a)({},m),{},(t={},Object(ce.a)(t,e.target.name,""),Object(ce.a)(t,"worning",""),t)))};return Object(X.jsxs)("div",{className:"segment",children:[Object(X.jsxs)("div",{className:"segment__header border_bottom",children:[Object(X.jsxs)("h2",{className:"segment__header-title",children:[r.length>1&&"Notes from ".concat(Oe(r[0].id)," to ").concat(Oe(r[r.length-1].id)),1===r.length&&"Notes for the ".concat(Oe(r[0].id)),0===r.length&&"No notes"]}),!t&&Object(X.jsxs)("form",{className:"filter-messages-form",onSubmit:function(e){e.preventDefault();var t=xe(O),s=t.isValid,n=t.errors;if(s){var c=O.startParam.split("/"),r=O.endParam.split("/"),i=new Date(+c[2],+c[1]-1,+c[0]).getTime(),d=new Date(+r[2],+r[1]-1,+r[0]).getTime();if(i<d){var u=[d,i];i=u[0],d=u[1],_(Object(l.a)(Object(l.a)({},O),{},{startParam:O.endParam,endParam:O.startParam})),j(Object(l.a)(Object(l.a)({},m),{},{worning:"Dates are swapped"}))}var b=a.filter((function(e){return e.id<=i&&e.id>=d}));o(b)}else j(n)},children:[Object(X.jsx)("div",{className:"filter-messages-form__worning-feedback",children:m.worning&&m.worning}),Object(X.jsxs)("div",{className:"filter-messages-form__wrapper",children:[Object(X.jsxs)("div",{className:"filter-messages-form__group",children:[Object(X.jsx)("input",{className:"filter-messages-form__input",type:"text",name:"startParam",value:O.startParam,onChange:p,placeholder:"dd/mm/yyyy"}),Object(X.jsx)("div",{className:"filter-messages-form__error-feedback",children:m.startParam&&m.startParam})]}),Object(X.jsxs)("div",{className:"filter-messages-form__group",children:[Object(X.jsx)("input",{className:"filter-messages-form__input",type:"text",name:"endParam",value:O.endParam,onChange:p,placeholder:"dd/mm/yyyy"}),Object(X.jsx)("div",{className:"filter-messages-form__error-feedback",children:m.endParam&&m.endParam})]})]}),Object(X.jsx)("button",{className:"button button__prim filter-messages-form__button",children:"filter"})]})]}),!t&&r&&Object(X.jsx)(n.a.Fragment,{children:r.map((function(e,t){return Object(X.jsx)(ge,{group:e,index:t},t)}))})]})},Ne=Object(W.h)((function(e){var t=e.history,a=e.dayData,s=a.date,c=a.isCurrentMonth,r=Object(i.c)((function(e){return e.messages})).messages,o=Object(i.b)(),d=Object(W.g)().path,l=n.a.useState([]),u=Object(z.a)(l,2),m=u[0],j=u[1];n.a.useEffect((function(){j([]);var e=r.find((function(e){return e.id===s.getTime()})),t=e&&e.messages.filter((function(e){return null!==e})).slice(0,3);t&&j(t)}),[s,r]);return Object(X.jsxs)("div",{className:"month-list__day",children:[Object(X.jsx)("div",{className:"month-list__day-header ".concat(c?"month-list__day-header_current":"month-list__day-header_other"),onClick:function(){o(ae(s)),t.push("".concat(d,"/day"))},children:Object(X.jsx)("div",{className:"month-list__day-number",children:s.getDate()})}),Object(X.jsx)("ul",{className:"month-list__day-tasks",children:m.map((function(e,t){return e&&Object(X.jsxs)("li",{className:"month-list__day-task",children:[Object(X.jsx)("h3",{className:"month-list__day-task-time",children:be(e.currentHour)}),Object(X.jsx)("p",{className:"month-list__day-task-text",children:e.message})]},t)}))})]})})),we=Object(W.h)((function(e){var t=e.weekData,a=e.weekNumber;return Object(X.jsx)("div",{className:"month-list__week border_bottom",children:t.map((function(e,t){return Object(X.jsx)(Ne,{dayData:e},t)}))},a)})),ye=function(){var e=Object(i.c)((function(e){return e.calendar})).data;return Object(X.jsxs)("div",{className:"month-list",children:[Object(X.jsx)("div",{className:"month-list__header border_bottom",children:O.map((function(e,t){return Object(X.jsx)("span",{className:"month-list__day-name",children:e},t)}))}),null===e||void 0===e?void 0:e.map((function(e,t){return Object(X.jsx)(we,{weekData:e,weekNumber:t},t)}))]})},De=function(){return Object(X.jsx)("div",{className:"calendar",children:Object(X.jsxs)(W.d,{children:[Object(X.jsx)(W.b,{exact:!0,path:"/calendar",component:ye}),Object(X.jsx)(W.b,{exact:!0,path:"/calendar/segment",component:ve}),Object(X.jsx)(W.b,{exact:!0,path:"/calendar/day",component:pe})]})})},ke=Object(W.h)((function(e){var t=e.history,a=e.dayData,s=a.date,n=a.isCurrentMonth,c=Object(W.g)().path,r=Object(i.b)(),o=Object(i.c)((function(e){return e.calendar})),d=o.selectedDate,l=o.currentDate.getTime()===s.getTime(),u=d&&d.getTime()===s.getTime();return Object(X.jsx)("div",{className:"widget-month__day \n      ".concat(n?"":"widget-month__day_shadowed"," \n      ").concat(l?"widget-month__day_current":"","\n      ").concat(u?"widget-month__day_selected":""),onClick:function(){r(ae(s)),t.push("".concat(c,"/day"))},children:Object(X.jsx)("span",{className:"widget-month__day__number",children:s.getDate()})})})),Se=Object(W.h)((function(e){var t=e.weekData,a=e.weekNumber;return Object(X.jsx)("div",{className:"widget-month__week",children:t.map((function(e,t){return Object(X.jsx)(ke,{dayData:e},t)}))},a)})),Ee=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.calendar})).basicDate;return Object(X.jsxs)("div",{className:"month-toggle",children:[Object(X.jsx)("button",{className:"month-toggle__button",onClick:function(){var a=new Date(t.getFullYear(),t.getMonth()-1);e(se(a))},children:"\u276e"}),Object(X.jsx)("button",{className:"month-toggle__button",onClick:function(){var a=new Date(t.getFullYear(),t.getMonth()+1);e(se(a))},children:"\u276f"})]})},Te=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.basicDate,a=e.data;return Object(X.jsxs)("div",{className:"widget-month border_bottom",children:[Object(X.jsxs)("div",{className:"widget-month__header border_bottom",children:[Object(X.jsxs)("h3",{className:"widget-month__date",children:[h[t.getMonth()]," ",t.getFullYear()]}),Object(X.jsx)(Ee,{})]}),Object(X.jsxs)("div",{className:"widget-month__list border_bottom",children:[Object(X.jsx)("div",{className:"widget-month__list-header",children:O.map((function(e,t){return Object(X.jsx)("span",{className:"widget-month__day-name",children:e},t)}))}),a.map((function(e,t){return Object(X.jsx)(Se,{weekData:e,weekNumber:t},t)}))]})]})},Ce=function(e){var t=e.user,a=e.allUsers,s=n.a.useState(!1),c=Object(z.a)(s,2),r=c[0],i=c[1],o=function(e){var s=Object(l.a)(Object(l.a)({},t),{},{role:e});Y.a.put("".concat(g,"/data-users/").concat(t.id),s).then((function(){a()})),console.log(t,"\u0421\u043c\u0435\u043d\u0430 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(t.email," \u0441 ").concat(t.role," \u043d\u0430 ").concat(e," \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043b\u0438\u0441\u0442 users"))};return Object(X.jsxs)("li",{className:"user user_decor-".concat(t.role),onClick:function(){return i(!r)},children:[Object(X.jsx)("h4",{className:"user__email",children:t.email}),r&&Object(X.jsxs)("div",{className:"user__buttons",children:[Object(X.jsx)("div",{className:"button button__add ".concat(t.role===x?"button_selected":""),onClick:function(){return o(x)},children:"user"}),Object(X.jsx)("div",{className:"button button__add ".concat(t.role===v?"button_selected":""),onClick:function(){return o(v)},children:"viewer"})]})]})},Pe=function(){var e=Object(i.c)((function(e){return e.auth.user})).id,t=n.a.useState(!1),a=Object(z.a)(t,2),s=a[0],c=a[1],r=n.a.useState([]),o=Object(z.a)(r,2),d=o[0],l=o[1],u=n.a.useCallback((function(){Y.a.get("".concat(g,"/data-users/?id_ne=").concat(e)).then((function(e){var t=e.data;l(t),c(!0)}))}),[e]);return n.a.useEffect((function(){u()}),[u]),Object(X.jsxs)("div",{className:"users-list",children:[Object(X.jsx)("h2",{className:"users-list__title border_bottom",children:"All users"}),s?Object(X.jsx)("ul",{className:"users-list__users border_bottom",children:d.map((function(e,t){return Object(X.jsx)(Ce,{user:e,allUsers:u},t)}))}):Object(X.jsx)("div",{children:"Loading"})]})},Ae=function(e){var t=e.isOpenSideBar,a=Object(i.c)((function(e){return e.auth.user})).role;return Object(X.jsxs)("div",{className:"side-bar ".concat(t?"side-bar_visible":""),children:[Object(X.jsx)(Te,{}),a===f?Object(X.jsx)(Pe,{}):null]})},Me=function(e){var t=e.isOpenSideBar,a=e.setIsOpenSideBar,s=Object(i.b)(),n=Object(i.c)((function(e){return e.calendar})),c=n.basicDate,r=n.currentDate,o=Object(i.c)((function(e){return e.auth.user})).email;return Object(X.jsx)("header",{className:"header border_bottom",children:Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsxs)("div",{className:"header__wrapper",children:[Object(X.jsxs)("div",{className:"header__group",children:[Object(X.jsx)("span",{className:"hamburger",onClick:function(){a(!t)},children:Object(X.jsx)("span",{className:"hamburger__line"})}),Object(X.jsx)("h2",{className:"header__email",children:o}),Object(X.jsx)(Ee,{}),Object(X.jsxs)("h2",{className:"header__date",children:[h[c.getMonth()]," ",c.getFullYear()]}),Object(X.jsx)(J.b,{to:"/calendar",className:"button header__button button__add",children:"Calendar"}),Object(X.jsx)(J.b,{to:"/calendar/segment",className:"button header__button button__add",children:"All notes"}),Object(X.jsx)(J.b,{to:"/calendar/day",className:"button header__button button__add",onClick:function(){s(ae(r)),s(se(r))},children:"Today"})]}),Object(X.jsx)(J.b,{to:"/logout",className:"button button__add",children:"logout"})]})})})};var Le=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.idSelectedDate,a=e.currentHour,s=Object(i.c)((function(e){return e.auth.user})),c=s.email,r=s.id,o=s.role,d=Object(i.c)((function(e){return e.messages})).messages,m=Object(i.c)((function(e){return e.modal})).modalType,j=Object(i.b)(),b=n.a.useState({userId:r,title:"",message:"",currentHour:a,email:c,role:o}),h=Object(z.a)(b,2),O=h[0],_=h[1],p=d.find((function(e){return e.id===t}));n.a.useEffect((function(){if(p&&p.messages[a]){var e=p.messages[a];e&&_(e)}}),[a,p]);var f=function(e){_(Object(l.a)(Object(l.a)({},O),{},Object(ce.a)({},e.target.name,e.target.value)))},x=function(){if(!u(O.message))if(p)p.messages[a]=O,Y.a.put("".concat(g,"/messages/").concat(t),p).then((function(){j(ee()),j(te(null)),j(Z())}));else{var e=new Array(24);e[a]=O;var s={id:t,messages:e};Y.a.post("".concat(g,"/messages"),s).then((function(){j(ee()),j(te(null)),j(Z())}))}};return Object(X.jsxs)("div",{className:"add-update-message-card",children:[Object(X.jsxs)("div",{className:"add-update-message-card__header",children:[Object(X.jsxs)("h3",{className:"add-update-message-card__date",children:["Date: ",Oe(t),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),"Time: ",be(a)]}),Object(X.jsx)("h3",{className:"add-update-message-card__author",children:c})]}),Object(X.jsx)("input",{type:"text",placeholder:"title",className:"input add-update-message-card__input",name:"title",value:O.title,onChange:f}),Object(X.jsx)("textarea",{placeholder:"note",className:"input add-update-message-card__textarea",name:"message",value:O.message,onChange:f}),Object(X.jsxs)("div",{className:"add-update-message-card__buttons",children:[w===m&&Object(X.jsx)("button",{className:"button button__prim",onClick:x,children:"update"}),N===m&&Object(X.jsx)("button",{className:"button button__prim",onClick:x,children:"add"})]})]})};var Ue=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.idSelectedDate,a=e.currentHour,s=Object(i.c)((function(e){return e.messages})).messages.find((function(e){return e.id===t}));return Object(X.jsxs)("div",{className:"view-message-card",children:[Object(X.jsxs)("div",{className:"view-message-card__header",children:[Object(X.jsxs)("h3",{className:"view-message-card__date",children:["Date: ",Oe(t),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),"Time: ",be(a)]}),Object(X.jsx)("h3",{className:"view-message-card__author",children:s.messages[a].email})]}),Object(X.jsx)("h2",{className:"view-message-card__title",children:s.messages[a].title}),Object(X.jsx)("p",{className:"view-message-card__text",children:s.messages[a].message})]})};var Fe=function(){var e=Object(i.c)((function(e){return e.modal})).modalType,t=Object(i.b)();return Object(X.jsx)("div",{className:"modal modal_visibility",children:Object(X.jsxs)("div",{className:"modal__wrapper",children:[Object(X.jsx)("span",{className:"modal__close-button",onClick:function(){t(te(null)),t(Z())}}),N===e&&Object(X.jsx)(Le,{}),w===e&&Object(X.jsx)(Le,{}),y===e&&Object(X.jsx)(Ue,{})]})})},Ie=function(){var e=n.a.useState(!1),t=Object(z.a)(e,2),a=t[0],s=t[1],c=n.a.useState(""),r=Object(z.a)(c,2),o=r[0],d=r[1],l=function(){s(!a)};return Object(i.c)((function(e){return e.auth.isAuthenticated}))?Object(X.jsx)(W.a,{exact:!0,to:"/calendar"}):Object(X.jsx)("div",{className:"login",children:Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsxs)("div",{className:"login__wrapper",children:[Object(X.jsx)(J.b,{to:"/",className:"button login__button button__add",children:"landing page"}),a?Object(X.jsx)(je,{handleToggleButtonClick:l,setRegisterUserEmail:d}):Object(X.jsx)(le,{handleToggleButtonClick:l,registerUserEmail:o})]})})})},He=function(){var e=Object(i.b)();return n.a.useEffect((function(){localStorage.removeItem("accessToken"),de(!1),e(G({}))}),[e]),Object(X.jsx)(W.a,{exact:!0,to:"/"})},qe=function(){var e=n.a.useState(!1),t=Object(z.a)(e,2),a=t[0],s=t[1],c=Object(W.g)();return a?Object(X.jsx)(W.a,{exact:!0,to:c.url}):Object(X.jsx)("div",{className:"not-found",children:Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsxs)("div",{className:"not-found__wrapper",children:[Object(X.jsx)("h2",{className:"not-found__title",children:"NotFound"}),Object(X.jsx)("button",{className:"button button__add",onClick:function(){s(!0)},children:"to home"})]})})})},Be=function(){var e=Object(i.c)((function(e){return e.auth})).isAuthenticated,t=Object(i.c)((function(e){return e.modal})).isOpenModal,a=n.a.useState(!0),s=Object(z.a)(a,2),c=s[0],r=s[1];return e?Object(X.jsxs)(ne,{children:[Object(X.jsx)(Me,{isOpenSideBar:c,setIsOpenSideBar:r}),Object(X.jsx)("main",{className:"main",children:Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsxs)("div",{className:"main__wrapper",children:[Object(X.jsx)(Ae,{isOpenSideBar:c}),Object(X.jsx)(De,{})]})})}),t&&Object(X.jsx)(Fe,{})]}):Object(X.jsx)(W.a,{to:"/login"})},Re=function(){return Object(X.jsx)("div",{className:"loading",children:Object(X.jsx)("h2",{className:"loading__title",children:"Loading"})})},Ye=(a(168),function(){var e=Object(i.b)();return n.a.useEffect((function(){if(localStorage.accessToken){var t=Object(V.a)(localStorage.accessToken),a=t.sub,s=Date.now()/1e3;t.exp<s?(localStorage.removeItem("accessToken"),de(!1),e(G({}))):(de(localStorage.accessToken),Y.a.get("".concat(g,"/data-users/").concat(a)).then((function(t){e(G(t.data))})).catch((function(){console.log("\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u043c\u044b \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0434\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435...")})))}}),[e]),Object(X.jsx)("div",{className:"App",children:Object(X.jsx)(J.a,{children:Object(X.jsxs)(W.d,{children:[Object(X.jsx)(W.b,{exact:!0,path:"/",component:$}),Object(X.jsx)(W.b,{path:"/calendar",component:Be}),Object(X.jsx)(W.b,{exact:!0,path:"/login",component:Ie}),Object(X.jsx)(W.b,{exact:!0,path:"/logout",component:He}),Object(X.jsx)(W.b,{component:qe})]})})})});r.a.render(Object(X.jsx)(i.a,{store:B,children:Object(X.jsx)(Ye,{})}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.30fddf4d.chunk.js.map