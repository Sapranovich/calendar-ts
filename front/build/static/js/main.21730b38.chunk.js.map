{"version":3,"sources":["services/isEmpty.ts","redux/auth/authConstants.ts","redux/auth/authReducer.ts","data/modalTypes.ts","data/userRoles.ts","data/regExp.ts","data/urls.ts","data/calendar.ts","services/monthData.ts","redux/calendar/calendarConstants.ts","redux/calendar/calendarReducer.ts","redux/messages/messagesConstants.ts","redux/messages/messagesReducer.ts","redux/modal/modalConstants.ts","redux/modal/modalReducer.ts","redux/reducers.ts","redux/index.ts","pages/Landing/index.tsx","redux/auth/authActions.ts","redux/modal/modalActions.ts","redux/messages/messagesActions.ts","redux/calendar/calendarActions.ts","components/MainWrapper/index.tsx","services/validationSignIn.ts","services/setAuthToken.ts","components/SignInForm/index.tsx","services/getModelUser.ts","services/validationSignUp.ts","components/SignUpForm/index.tsx","services/getTimeInFormat.ts","components/Calendar/CardMessage/index.tsx","services/getDateInFormat.ts","components/Calendar/Segment/SegmentGroup/index.tsx","services/verificationFilterInput.ts","services/validationFilterForm.ts","services/groupMessagesByDay.ts","components/Calendar/Segment/index.tsx","components/SelectedUserData/index.tsx","components/Calendar/CardEmpty/index.tsx","components/Calendar/Day/index.tsx","components/Calendar/Month/DayOfTheWeek/index.tsx","components/Calendar/Month/WeekOfTheMonth/index.tsx","components/Calendar/Month/index.tsx","components/Calendar/index.tsx","components/Calendar/WidgetMonth/WidgetDayOfTheWeek/index.tsx","components/Calendar/WidgetMonth/WidgetWeekOfTheMonth/index.tsx","components/Calendar/MonthToggle/index.tsx","components/Calendar/WidgetMonth/index.tsx","components/UsersList/UserItem/index.tsx","components/UsersList/index.tsx","components/SideBar/index.tsx","components/Header/index.tsx","hooks/useMessageObject.ts","components/AddUpdateMessageModal/index.tsx","components/ViewMessageModal/index.tsx","components/Modal/index.tsx","pages/Login/index.tsx","pages/Logout/index.tsx","pages/NotFound/index.tsx","pages/Main/index.tsx","pages/Loading/index.tsx","App.tsx","index.tsx"],"names":["isEmpty","value","undefined","Object","keys","length","trim","SET_AUTH_USER","SET_LOADED","initialState","isAuthenticated","isLoaded","user","MODAL_TYPES","USER_ROLES","REG_EXP_CHECK_DATE","BACKEND_URL","MONTH_NAMES","WEEK_DAY_NAMES","DAYS_IN_MONTH","monthData","year","month","data","date","Date","daysInMonth","getMonth","isLeapYear","getFullYear","getDaysInMonth","monthStartsOn","dayOfWeek","getDay","getDayOfWeek","day","i","j","isCurrentMonth","SET_ALL_START_DATES","UPDATE_DATA_MONTH","SET_CURRENT_HOUR","UPDATE_SELECTED_DATE","basicDate","currentDate","currentHour","selectedWeek","selectedDate","idSelectedDate","SET_ALL_MESSAGES","isNoMessages","isLoadedMessages","messages","OPEN_MODAL","SET_MODAL_DATA","CLOSE_MODAL","isOpenModal","modalType","modalData","rootReducers","combineReducers","calendar","state","action","type","constants","payload","getTime","modal","auth","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Landing","className","to","setAuthUser","setLoaded","boolean","openModal","closeModal","requestAllMessages","userId","dispatch","axios","get","then","res","setAllMessages","setCurrentHour","updateSelectedDate","updateDataMonth","MainWrapper","children","useSelector","id","role","useDispatch","React","useEffect","getDate","setAllStartDates","setTimeout","Fragment","validationSignIn","errors","Validator","isEmail","email","isLength","password","min","max","isValid","setAuthToken","token","defaults","headers","common","SignInForm","handleToggleButtonClick","registerUserEmail","useState","stateForm","setStateForm","errorsForm","setErrorsForm","handleInputChange","event","target","name","request","onSubmit","preventDefault","post","accessToken","localStorage","setItem","idUser","jwt_decode","sub","catch","err","response","placeholder","onChange","onClick","getModelUser","stateSignUpForm","validationSignUp","password_confirmed","equals","SignUpForm","setRegisterUserEmail","modelUser","getTimeInFormat","hour","CardMessage","groupId","messageData","authId","handleOpenModalClick","message","delete","getDateInFormat","dateInMilliseconds","SegmentGroup","group","map","index","verificationFilterInput","currentValueInput","validationFilterForm","startParam","match","endParam","groupMessagesByDay","Array","from","Set","el","dayId","daysId","filter","device","Segment","propsMessages","messagesLocalStorage","setMessagesLocalStorage","errorsFilter","setErrorsFilter","paramsFilter","setParamFilter","arrayStartParam","split","arrayEndParam","indexStartParam","indexEndParam","warning","filteredData","SelectedUserData","useRouteMatch","params","userData","setUserData","userMessages","setUserMessages","getAllDataUser","useCallback","a","handleUpdateRoleClick","updateDataUser","put","console","log","CardEmpty","Day","messagesTargetDay","messagesDay","fill","find","withRouter","history","dayData","path","setLocalStorage","slice","push","weekData","weekNumber","Month","week","Calendar","exact","component","isCurrentDate","isSelectedDate","MonthToggle","WidgetMonth","UserItem","UsersList","setIsLoaded","listUsers","setListUsers","SideBar","isOpenSideBar","Header","setIsOpenSideBar","useModalMessageObject","modalMessageObject","title","AddUpdateMessageModal","messageObject","stateMessageModal","setStateMessageModal","handleAddUpdateButtonClick","ViewMessageModal","Modal","Login","isSignUpForm","toggleIsSignUpForm","Logout","removeItem","NotFound","redirect","setRedirect","url","Main","Loading","App","decodedToken","currentTime","now","exp","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.21730b38.chunk.js","sourcesContent":["function isEmpty(value: any): boolean {\r\n  return (\r\n    value === undefined ||\r\n    value === null ||\r\n    (typeof value === \"object\" && Object.keys(value).length === 0) ||\r\n    (typeof value === \"string\" && value.trim().length === 0)\r\n  );\r\n}\r\nexport default isEmpty;\r\n","export const SET_AUTH_USER = \"SET_AUTH_USER\";\r\nexport const SET_LOADED = \"SET_LOADED\";\r\n","import isEmpty from \"../../services/isEmpty\";\r\n\r\nimport { ModelUserType } from '../../services/getModelUser';\r\n\r\nimport * as constants from \"./authConstants\";\r\nimport * as actions from \"./authActions\";\r\n\r\ntype InferValueTypes<T> = T extends { [key: string]: infer U } ? U : never;\r\ntype ActionTypes = ReturnType<InferValueTypes<typeof actions>>;\r\n\r\nexport type InitialStateType = {\r\n  isAuthenticated: boolean\r\n  isLoaded: boolean\r\n  user: ModelUserType \r\n};\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  isLoaded: false,\r\n  user: {},\r\n};\r\n\r\nexport default function auth(state = initialState, action: ActionTypes):InitialStateType {\r\n  switch (action.type) {\r\n    case constants.SET_AUTH_USER:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: !isEmpty(action.payload),\r\n        user: action.payload,\r\n      };\r\n    case constants.SET_LOADED:\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const MODAL_TYPES = {\r\n  ADD: \"ADD\",\r\n  UPDATE: \"UPDATE\",\r\n  VIEW: \"VIEW\",\r\n};","export const USER_ROLES = {\r\n  ADMIN: \"admin\",\r\n  USER: \"user\",\r\n  VIEWER: \"viewer\",\r\n};","export const REG_EXP_CHECK_DATE =\r\n  \"^(?=\\\\d{2}([\\\\/])\\\\d{2}\\\\1\\\\d{4}$)(?:0[1-9]|1\\\\d|[2][0-8]|29(?!.02.(?!(?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)\\\\d{2}(?:[02468][048]|[13579][26])))|30(?!.02)|31(?=.(?:0[13578]|10|12))).(?:0[1-9]|1[012]).\\\\d{4}$\";","export const BACKEND_URL = \"https://my-cool-project-123.herokuapp.com\";\r\n// export const BACKEND_URL = \"http://localhost:3001\";","export const MONTH_NAMES = [\r\n  \"January\",\r\n  \"February\",\r\n  \"March\",\r\n  \"April\",\r\n  \"May\",\r\n  \"June\",\r\n  \"July\",\r\n  \"August\",\r\n  \"September\",\r\n  \"October\",\r\n  \"November\",\r\n  \"December\",\r\n];\r\nexport const WEEK_DAY_NAMES = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\r\n\r\nexport const DAYS_WEEK = 7;\r\nexport const HOURS_DAY = 24;\r\n\r\nexport const DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n","import { DAYS_IN_MONTH, DAYS_WEEK } from '../data';\r\n\r\n// Проверка, является ли год высокосным\r\nfunction isLeapYear(year: number): boolean {\r\n  return !(year % 4 || (!(year % 100) && year % 400));\r\n}\r\n\r\n// Рассчет количества дней в текущем месяце\r\nfunction getDaysInMonth(date: Date): number {\r\n  const month = date.getMonth();\r\n  const year = date.getFullYear();\r\n  if (isLeapYear(year) && month === 1) {\r\n    return DAYS_IN_MONTH[month] + 1;\r\n  } else {\r\n    return DAYS_IN_MONTH[month];\r\n  }\r\n}\r\n\r\n// Рассчет дня недели (в USA воскресенье считается 0 днем)\r\nfunction getDayOfWeek(date: Date): number {\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0) return 6;\r\n  return dayOfWeek - 1;\r\n}\r\n\r\ntype DataItemType = {\r\n  date: Date;\r\n  isCurrentMonth: boolean;\r\n}\r\n\r\n//  Рассчет сетки текущего(выбранного) месяца\r\nfunction monthData(year: number, month: number): Array<DataItemType[]> {\r\n  const data: Array<DataItemType[]> = [];\r\n  const date = new Date(year, month);\r\n  const daysInMonth = getDaysInMonth(date);\r\n  const monthStartsOn = getDayOfWeek(date);\r\n  let day = 1;\r\n\r\n  for (let i = 0; i < (daysInMonth + monthStartsOn) / DAYS_WEEK; i++) {\r\n    data[i] = [];\r\n    for (let j = 0; j < DAYS_WEEK; j++) {\r\n      if (i === 0 && j < monthStartsOn) {\r\n        data[i][j] = {\r\n          date: new Date(year, month, day - (monthStartsOn - j)),\r\n          isCurrentMonth: false,\r\n        };\r\n      } else if (day > daysInMonth) {\r\n        data[i][j] = {\r\n          date: new Date(year, month, day++),\r\n          isCurrentMonth: false,\r\n        };\r\n      } else {\r\n        data[i][j] = {\r\n          date: new Date(year, month, day++),\r\n          isCurrentMonth: true,\r\n        };\r\n      }\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nexport default monthData;\r\n","export const SET_ALL_START_DATES = 'SET_ALL_START_DATES';\r\nexport const UPDATE_DATA_MONTH = 'UPDATE_DATA_MONTH';\r\nexport const SET_CURRENT_HOUR ='SET_CURRENT_HOUR';\r\nexport const UPDATE_SELECTED_DATE = 'UPDATE_SELECTED_DATE';\r\nexport const CLEAR_DATES ='CLEAR_DATES';\r\n","import monthData from \"../../services/monthData\";\r\n\r\nimport * as constants from \"./calendarConstants\";\r\nimport * as actions from \"./calendarActions\";\r\n\r\nexport type DayDataType = {\r\n  date: Date;\r\n  isCurrentMonth: boolean;\r\n};\r\n\r\ntype InferValueTypes<T> = T extends { [key: string]: infer U } ? U : never;\r\ntype ActionTypes = ReturnType<InferValueTypes<typeof actions>>;\r\n\r\nexport type InitialStateType = {\r\n  data: DayDataType[][] | null;\r\n  currentDate: Date | null;\r\n  currentHour: number | null;\r\n  basicDate: Date | null;\r\n  selectedDate: Date | null;\r\n  selectedWeek: number | null;\r\n  idSelectedDate: number | null;\r\n};\r\n\r\nconst initialState: InitialStateType = {\r\n  data: null,\r\n  basicDate: null,\r\n  currentDate: null,\r\n  currentHour: null,\r\n  selectedWeek: null,\r\n  selectedDate: null,\r\n  idSelectedDate: null,\r\n};\r\n\r\nexport default function calendar( state = initialState, action: ActionTypes): InitialStateType {\r\n  switch (action.type) {\r\n    case constants.SET_ALL_START_DATES:\r\n      return {\r\n        ...state,\r\n        data: monthData(\r\n          action.payload.getFullYear(),\r\n          action.payload.getMonth()\r\n        ),\r\n        currentDate: action.payload,\r\n        basicDate: action.payload,\r\n      };\r\n    case constants.UPDATE_DATA_MONTH:\r\n      return {\r\n        ...state,\r\n        data: monthData(\r\n          action.payload.getFullYear(),\r\n          action.payload.getMonth()\r\n        ),\r\n        basicDate: action.payload,\r\n      };\r\n    case constants.SET_CURRENT_HOUR:\r\n      return {\r\n        ...state,\r\n        currentHour: action.payload,\r\n      };\r\n    case constants.UPDATE_SELECTED_DATE:\r\n      return {\r\n        ...state,\r\n        selectedDate: action.payload,\r\n        idSelectedDate: action.payload.getTime(),\r\n      };\r\n    // case constants.CLEAR_DATES:\r\n    //   return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const SET_ALL_MESSAGES = \"SET_ALL_MESSAGES\";\r\n","import isEmpty from '../../services/isEmpty';\r\n\r\nimport { SetAllMessagesActionType } from './messagesActions';\r\nimport { UserMessageDataType } from '../../types/messagesDataTypes';\r\n\r\nimport * as constants from './messagesConstants';\r\n\r\nexport type InitialStateType = {\r\n  isNoMessages: boolean\r\n  isLoadedMessages: boolean\r\n  messages: UserMessageDataType[]\r\n};\r\nconst initialState = {\r\n  isNoMessages: false,\r\n  isLoadedMessages: false,\r\n  messages: [],\r\n};\r\n\r\nexport default function messages(state = initialState, action: SetAllMessagesActionType): InitialStateType {\r\n  switch (action.type) {\r\n    case constants.SET_ALL_MESSAGES:\r\n      return {\r\n        ...state,\r\n        isNoMessages: isEmpty(action.payload),\r\n        isLoadedMessages: true,\r\n        messages: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const OPEN_MODAL = \"OPEN_MODAL\";\r\nexport const SET_MODAL_DATA = \"SET_MODAL_DATA\";\r\nexport const CLOSE_MODAL = \"CLOSE_MODAL\";\r\n","import * as constants from \"./modalConstants\";\r\nimport * as actions from './modalActions';\r\n\r\nimport { UserMessageDataType } from '../../types/messagesDataTypes';\r\n\r\ntype InferValueTypes<T> = T extends { [key: string]: infer U } ? U : never;\r\ntype ActionTypes = ReturnType<InferValueTypes<typeof actions>>;\r\n\r\nexport type InitialStateType = {\r\n  isOpenModal:boolean\r\n  modalType:string | null\r\n  modalData: UserMessageDataType\r\n}\r\n\r\nconst initialState = {\r\n  isOpenModal: false,\r\n  modalType: null,\r\n  modalData: {}\r\n};\r\n\r\nexport default function modal(state = initialState, action: ActionTypes):InitialStateType {\r\n  switch (action.type) {\r\n    case constants.OPEN_MODAL:\r\n      return {\r\n        ...state,\r\n        isOpenModal: true,\r\n        modalType: action.payload\r\n      };\r\n    case constants.SET_MODAL_DATA:\r\n      return {\r\n        ...state,\r\n        modalData: action.payload\r\n      }  \r\n    case constants.CLOSE_MODAL:\r\n      return initialState\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport auth from './auth/authReducer';\r\nimport calendar from './calendar/calendarReducer';\r\nimport messages from './messages/messagesReducer';\r\nimport modal from './modal/modalReducer';\r\n\r\n\r\n\r\nconst rootReducers = combineReducers({\r\n  calendar,\r\n  modal,\r\n  auth,\r\n  messages,\r\n});\r\nexport type RootState = ReturnType<typeof rootReducers>;\r\n\r\nexport default rootReducers;\r\n","import { compose, createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport rootReducers from \"./reducers\";\r\n\r\nconst composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n  rootReducers,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Landing = (): JSX.Element => {\r\n  return (\r\n    <div className=\"landing\">\r\n      <div className=\"wrapper\">\r\n        <div className=\"landing__wrapper\">\r\n          <div className=\"landing__group\">\r\n          <h1 className='landing__title'>Calendar</h1>\r\n            <Link to=\"/calendar\" className=\"button button__add\">\r\n              get started\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Landing;\r\n","import { ModelUserType } from '../../services/getModelUser';\r\n\r\nimport * as constants from \"./authConstants\";\r\n\r\ntype SetAuthUserActionType = {\r\n  type: typeof constants.SET_AUTH_USER;\r\n  payload: ModelUserType;\r\n};\r\nexport function setAuthUser(user: ModelUserType ): SetAuthUserActionType {\r\n  return {\r\n    type: constants.SET_AUTH_USER,\r\n    payload: user,\r\n  };\r\n}\r\n\r\ntype SetLoadedActionType = {\r\n  type: typeof constants.SET_LOADED;\r\n  payload: boolean;\r\n};\r\nexport function setLoaded(boolean: boolean): SetLoadedActionType {\r\n  return {\r\n    type: constants.SET_LOADED,\r\n    payload: boolean,\r\n  };\r\n}\r\n","import * as constants from \"./modalConstants\";\r\nimport { UserMessageDataType } from '../../types/messagesDataTypes';\r\n\r\ntype OpenModalActionType = {\r\n  type: typeof constants.OPEN_MODAL\r\n  payload: string\r\n};\r\nexport const openModal = (modalType: string):OpenModalActionType => {\r\n  return {\r\n    type: constants.OPEN_MODAL,\r\n    payload: modalType\r\n  };\r\n};\r\n\r\ntype SetModalDataActionType = {\r\n  type: typeof constants.SET_MODAL_DATA\r\n  payload: UserMessageDataType\r\n};\r\nexport const setModalData = (modalData: UserMessageDataType): SetModalDataActionType => {\r\n  return {\r\n    type: constants.SET_MODAL_DATA,\r\n    payload: modalData\r\n  }\r\n};\r\n\r\ntype CloseModalActionType = {\r\n  type: typeof constants.CLOSE_MODAL\r\n};\r\nexport const closeModal = ():CloseModalActionType => {\r\n  return {\r\n    type: constants.CLOSE_MODAL,\r\n  };\r\n};\r\n","import axios from \"axios\";\r\nimport { Action } from \"redux\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\n\r\nimport { UserMessageDataType } from \"../../types/messagesDataTypes\";\r\nimport IStore from \"../interfaceStore\";\r\n\r\nimport * as constants from \"./messagesConstants\";\r\nimport { BACKEND_URL } from '../../data';\r\n\r\nexport type SetAllMessagesActionType = {\r\n  type: typeof constants.SET_ALL_MESSAGES;\r\n  payload: UserMessageDataType[];\r\n};\r\nexport const setAllMessages = (messages: UserMessageDataType[]): SetAllMessagesActionType => {\r\n  return {\r\n    type: constants.SET_ALL_MESSAGES,\r\n    payload: messages,\r\n  };\r\n};\r\n\r\nexport const requestAllMessages = (userId:number): ThunkAction<void, IStore, unknown, Action<string>> => (dispatch) => {\r\n  // axios.get(`${BACKEND_URL}/messages?_sort=id&_order=asc`) сортировка в обратном порядке\r\n    axios\r\n    .get(`${BACKEND_URL}/messages?userId=${userId}&_sort=dayId,currentHour&_order=asc`)\r\n    .then((res) => {\r\n      const messages = res.data;\r\n      dispatch(setAllMessages(messages));\r\n    });\r\n};\r\n\r\n","import * as constants from \"./calendarConstants\";\r\n\r\ntype SetAllStartDatesActionType = {\r\n  type: typeof constants.SET_ALL_START_DATES;\r\n  payload: Date;\r\n};\r\nexport function setAllStartDates(date: Date): SetAllStartDatesActionType {\r\n  return {\r\n    type: constants.SET_ALL_START_DATES,\r\n    payload: date,\r\n  };\r\n}\r\n\r\ntype SetCurrentHourActionType = {\r\n  type: typeof constants.SET_CURRENT_HOUR;\r\n  payload: number | null;\r\n};\r\nexport function setCurrentHour (currentHour: number | null):SetCurrentHourActionType{\r\n  return {\r\n    type: constants.SET_CURRENT_HOUR,\r\n    payload: currentHour,\r\n  };\r\n}\r\n\r\ntype UpdateSelectedDateActionType = {\r\n  type: typeof constants.UPDATE_SELECTED_DATE;\r\n  payload: Date;\r\n};\r\nexport function updateSelectedDate(date: Date): UpdateSelectedDateActionType {\r\n  return {\r\n    type: constants.UPDATE_SELECTED_DATE,\r\n    payload: date,\r\n  };\r\n}\r\n\r\ntype UpdateDataMonthActionType = {\r\n  type: typeof constants.UPDATE_DATA_MONTH;\r\n  payload: Date;\r\n};\r\nexport function updateDataMonth(date:Date):UpdateDataMonthActionType{\r\n  return{\r\n    type: constants.UPDATE_DATA_MONTH,\r\n    payload: date\r\n  }\r\n}","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport { Loading } from \"../../pages\";\r\nimport { setAllStartDates, setLoaded, requestAllMessages } from \"../../redux/actions\";\r\n\r\nconst MainWrapper = ({ children }: { children: React.ReactNode }): JSX.Element => {\r\n  const { isLoaded } = useSelector((store: IStore) => store.auth);\r\n  const { id, role } = useSelector((store: IStore) => store.auth.user);\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(():()=> void => {\r\n    const date = new Date();\r\n    const currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n    dispatch(setAllStartDates(currentDate));\r\n    dispatch(requestAllMessages(id!));\r\n    // временная фейк-запрос\r\n    setTimeout(() => dispatch(setLoaded(true)), 1000);\r\n    return () => dispatch(setLoaded(false));\r\n  }, [dispatch, id, role]);\r\n\r\n  return <React.Fragment>{isLoaded ? children : <Loading />}</React.Fragment>;\r\n};\r\n\r\nexport default MainWrapper;\r\n","import Validator from \"validator\";\r\nimport isEmpty from \"./isEmpty\";\r\n\r\ntype ValidationSignInPropsType = {\r\n  email: string;\r\n  password: string;\r\n}\r\ntype ValidationSignInErrorsType = {\r\n  email?: string;\r\n  password?: string;\r\n}\r\ntype ReturnValidationSignInType = {\r\n  errors: ValidationSignInErrorsType;\r\n  isValid: boolean;\r\n}\r\nfunction validationSignIn(data: ValidationSignInPropsType): ReturnValidationSignInType {\r\n  const errors: ValidationSignInErrorsType = {};\r\n\r\n  if (!Validator.isEmail(data.email)) {\r\n    errors.email = \"Email entered incorrectly\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.email)) {\r\n    errors.email = \"Enter your email\";\r\n  }\r\n\r\n  if (!Validator.isLength(data.password, { min: 6, max: 30 })) {\r\n    errors.password = \"The password must be at least 6 characters long\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.password)) {\r\n    errors.password = \"Enter password\";\r\n  }\r\n\r\n  return {\r\n    errors,\r\n    isValid: isEmpty(errors),\r\n  };\r\n}\r\n\r\nexport default validationSignIn;\r\n","import axios from \"axios\";\r\n\r\nfunction setAuthToken(token: string | false): void {\r\n  if (token) {\r\n    axios.defaults.headers.common[\"Authorization\"] = token;\r\n  } else {\r\n    axios.defaults.headers.common[\"Authorization\"] = null;\r\n  }\r\n}\r\nexport default setAuthToken;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport validationSignIn from \"../../services/validationSignIn\";\r\nimport setAuthToken from \"../../services/setAuthToken\";\r\nimport { setAuthUser } from \"../../redux/actions\";\r\nimport { StateSignInFormType, SignInFormPropsType, ErrorsSignInFormType } from \"../../types/signInFormTypes\";\r\nimport { DecodedTokenType } from \"../../types/decodedTokenTypes\";\r\nimport { ModelUserType } from '../../services/getModelUser'; \r\n\r\nimport { BACKEND_URL } from '../../data';\r\n\r\nconst SignInForm = ({ handleToggleButtonClick, registerUserEmail }: SignInFormPropsType): JSX.Element => {\r\n  const dispatch = useDispatch();\r\n  //возможно стоит перенести ошибки в redux хранилище\r\n  const [stateForm, setStateForm] = React.useState<StateSignInFormType>({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [errorsForm, setErrorsForm] = React.useState<ErrorsSignInFormType>({});\r\n\r\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setStateForm({\r\n      ...stateForm,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n    setErrorsForm({\r\n      ...errorsForm,\r\n      request: \"\",\r\n      [event.target.name]: \"\",\r\n    });\r\n  };\r\n\r\n  React.useEffect(()=>{\r\n    if(registerUserEmail) setStateForm({...stateForm, email: registerUserEmail});\r\n    //  не могу понять, в чем тут ошибка \r\n  },[registerUserEmail])\r\n\r\n  const handleSubmitForm = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    const { isValid, errors } = validationSignIn(stateForm);\r\n    if (isValid) {\r\n      // Возможно стоит перенести в action\r\n      axios\r\n        .post(`${BACKEND_URL}/signin`, stateForm)\r\n        .then((res: { data: { accessToken: string } }) => {\r\n          const { accessToken } = res.data;\r\n          localStorage.setItem(\"accessToken\", accessToken);\r\n          setAuthToken(accessToken);\r\n          const decodedToken: DecodedTokenType = jwt_decode(accessToken);\r\n          const idUser = decodedToken.sub;\r\n          axios\r\n            .get(`${BACKEND_URL}/data-users/${idUser}`)\r\n            .then((res: { data: ModelUserType }) => dispatch(setAuthUser(res.data)))\r\n            // .catch((err: { response: { data: string } }) => setErrorsForm({ request: err.response.data }))\r\n        })\r\n        .catch((err: { response: { data: string } }) => {\r\n          setErrorsForm({ request: err.response.data })\r\n        })\r\n    } else {\r\n      setErrorsForm(errors);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"sign-in-form\" onSubmit={handleSubmitForm}>\r\n      <h2 className=\"sign-in-form__title\">Sign In</h2>\r\n      \r\n      <div className=\"sign-in-form__error-request-feedback\">{errorsForm.request}</div>\r\n      \r\n      <div className=\"sign-in-form__group\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email\"\r\n          className=\"input sign-in-form__input\"\r\n          name=\"email\"\r\n          value={stateForm.email}\r\n          onChange={handleInputChange}\r\n        />\r\n\r\n        <div className=\"sign-in-form__error-feedback\">{errorsForm.email}</div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"sign-in-form__group\">\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          className=\"input sign-in-form__input\"\r\n          name=\"password\"\r\n          value={stateForm.password}\r\n          onChange={handleInputChange}\r\n        />\r\n\r\n        <div className=\"sign-in-form__error-feedback\">{errorsForm.password}</div>\r\n\r\n      </div>\r\n\r\n      <div className=\"sign-in-form__group-buttons\">\r\n        <button type='submit' className=\"button button__prim\">\r\n        Sign In\r\n        </button>\r\n        <p className=\"sign-in-form__group-buttons-text\">You are new? <span onClick={handleToggleButtonClick}>Create new</span></p>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SignInForm;\r\n","import { StateSignUpFormType } from \"../types/signUpFormTypes\";\r\nimport { USER_ROLES } from \"../data\";\r\n\r\nexport type ModelUserType = {\r\n  id?: number;\r\n  name?: string;\r\n  email?: string;\r\n  role?: string;\r\n}\r\n\r\nfunction getModelUser(stateSignUpForm: StateSignUpFormType, userId: number): ModelUserType {\r\n  const { name, email } = stateSignUpForm;\r\n  const modelUser = {\r\n    id: userId,\r\n    name,\r\n    email,\r\n    role: USER_ROLES.USER,\r\n  };\r\n  return modelUser;\r\n}\r\n\r\nexport default getModelUser;\r\n","import Validator from \"validator\";\r\nimport isEmpty from \"./isEmpty\";\r\n\r\ntype ValidationSignUpPropsType = {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n  password_confirmed: string;\r\n}\r\ntype ValidationSignUpErrorsType = {\r\n  name?: string;\r\n  email?: string;\r\n  password?: string;\r\n  password_confirmed?: string;\r\n}\r\ntype ReturnValidationSignUpType = {\r\n  errors: ValidationSignUpErrorsType;\r\n  isValid: boolean;\r\n}\r\n\r\nfunction validationSignUp(data: ValidationSignUpPropsType): ReturnValidationSignUpType {\r\n  const errors: ValidationSignUpErrorsType = {};\r\n\r\n  if (!Validator.isLength(data.name, { min: 2, max: 30 })) {\r\n    errors.name = \"Name must be between 2 and 30 characters\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.name)) {\r\n    errors.name = \"Enter your name\";\r\n  }\r\n\r\n  if (!Validator.isEmail(data.email)) {\r\n    errors.email = \"Email entered incorrectly\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.email)) {\r\n    errors.email = \"Enter your email\";\r\n  }\r\n\r\n  if (!Validator.isLength(data.password, { min: 6, max: 30 })) {\r\n    errors.password = \"The password must be at least 6 characters long\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.password)) {\r\n    errors.password = \"Enter password\";\r\n  }\r\n\r\n  if (!Validator.isLength(data.password_confirmed, { min: 6, max: 30 })) {\r\n    errors.password_confirmed =\r\n      \"The password must be at least 6 characters long\";\r\n  }\r\n\r\n  if (!Validator.equals(data.password, data.password_confirmed)) {\r\n    errors.password_confirmed = \"Password and confirm password must match\";\r\n  }\r\n\r\n  if (Validator.isEmpty(data.password_confirmed)) {\r\n    errors.password_confirmed = \"Enter password\";\r\n  }\r\n\r\n  return {\r\n    errors,\r\n    isValid: isEmpty(errors),\r\n  };\r\n}\r\n\r\nexport default validationSignUp;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nimport getModelUser from \"../../services/getModelUser\";\r\nimport validationSignUp from \"../../services/validationSignUp\";\r\nimport { DecodedTokenType } from \"../../types/decodedTokenTypes\";\r\nimport { SignUpFormPropsType, StateSignUpFormType, ErrorsSignUpFormType } from \"../../types/signUpFormTypes\";\r\n\r\nimport { BACKEND_URL } from '../../data';\r\n\r\nconst SignUpForm = ({ handleToggleButtonClick, setRegisterUserEmail }: SignUpFormPropsType):JSX.Element => {\r\n  const [stateForm, setStateForm] = React.useState<StateSignUpFormType>({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    password_confirmed: \"\",\r\n  });\r\n\r\n  const [errorsForm, setErrorsForm] = React.useState<ErrorsSignUpFormType>({});\r\n\r\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setStateForm({\r\n      ...stateForm,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n    setErrorsForm({\r\n      ...errorsForm,\r\n      request: \"\",\r\n      [event.target.name]: \"\",\r\n    });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setRegisterUserEmail(\"\");\r\n  },[setRegisterUserEmail]);\r\n\r\n  const handleSubmitForm = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    const { isValid, errors } = validationSignUp(stateForm);\r\n    if (isValid) {\r\n      // очень много логики, возможно нужно перенести в action или в services\r\n      const user = {\r\n        email: stateForm.email,\r\n        password: stateForm.password,\r\n      };\r\n      axios\r\n        .post(`${BACKEND_URL}/signup`, user)\r\n        .then((res: { data: { accessToken: string } }) => {\r\n          const { accessToken } = res.data;\r\n          const decodedToken: DecodedTokenType = jwt_decode(accessToken);\r\n          const userId = +decodedToken.sub;\r\n          const modelUser = getModelUser(stateForm, userId);\r\n          axios\r\n            .post(`${BACKEND_URL}/data-users`, modelUser)\r\n            .catch((err: { response: { data: string } }) => setErrorsForm({ request: err.response.data }));\r\n        })\r\n        .then(() => {\r\n          handleToggleButtonClick();\r\n          setRegisterUserEmail(user.email);\r\n        })\r\n        .catch((err: { response: { data: string } }) => setErrorsForm({ request: err.response.data }));\r\n    } else {\r\n      setErrorsForm(errors);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"sign-up-form\" onSubmit={handleSubmitForm}>\r\n      <h2 className=\"sign-up-form__title\">Sign Up</h2>\r\n    \r\n      <div className=\"sign-up-form__error-request-feedback\">{errorsForm.request}</div>\r\n    \r\n      <div className=\"sign-up-form__group\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          className=\"input sign-up-form__input\"\r\n          name=\"name\"\r\n          value={stateForm.name}\r\n          onChange={handleInputChange}\r\n        />\r\n      \r\n        <div className=\"sign-up-form__error-feedback\">{errorsForm.name}</div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"sign-up-form__group\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email\"\r\n          className=\"input sign-up-form__input\"\r\n          name=\"email\"\r\n          value={stateForm.email}\r\n          onChange={handleInputChange}\r\n        />\r\n        \r\n        <div className=\"sign-up-form__error-feedback\">{errorsForm.email}</div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"sign-up-form__group\">\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          className=\"input sign-up-form__input\"\r\n          name=\"password\"\r\n          value={stateForm.password}\r\n          onChange={handleInputChange}\r\n        />\r\n        \r\n        <div className=\"sign-up-form__error-feedback\">{errorsForm.password}</div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"sign-up-form__group\">\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password confirmed\"\r\n          className=\"input sign-up-form__input\"\r\n          name=\"password_confirmed\"\r\n          value={stateForm.password_confirmed}\r\n          onChange={handleInputChange}\r\n        />\r\n        \r\n        <div className=\"sign-up-form__error-feedback\">{errorsForm.password_confirmed}</div>\r\n        \r\n      </div>\r\n\r\n      <div className=\"sign-up-form__group-buttons\">\r\n        <button\r\n          type=\"submit\"\r\n          className=\"button button__prim\"\r\n        >\r\n          Sign Up\r\n        </button>\r\n        <p className=\"sign-up-form__group-buttons-text\">\r\n                Already have account? <span onClick={handleToggleButtonClick}>Login</span>\r\n        </p>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SignUpForm;","// Преобразование числового значения часа в формат чч:мм\r\nfunction getTimeInFormat(hour: number): string {\r\n  return hour >= 10 ? `${hour}:00` : `0${hour}:00`;\r\n}\r\n\r\nexport default getTimeInFormat;","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport { openModal, setCurrentHour, updateSelectedDate, setModalData } from \"../../../redux/actions\";\r\nimport getTimeInFormat from \"../../../services/getTimeInFormat\";\r\nimport { requestAllMessages } from \"../../../redux/messages/messagesActions\";\r\nimport { CardMessagePropsType } from '../../../types/cardMessageTypes';\r\n\r\nimport { BACKEND_URL, MODAL_TYPES } from '../../../data';\r\n\r\nconst CardMessage = ({ groupId, messageData}: CardMessagePropsType): JSX.Element => {\r\n  const authId = useSelector((store: IStore) => store.auth.user.id);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleOpenModalClick = (modalType: string) => {\r\n    dispatch(setModalData(messageData))\r\n    if (groupId) {\r\n      const date = new Date(groupId);\r\n      dispatch(updateSelectedDate(date));\r\n    }\r\n    dispatch(setCurrentHour(messageData.currentHour!));\r\n    dispatch(openModal(modalType));\r\n  };\r\n  const handleRemoveButtonClick = () => {\r\n    axios\r\n      .delete(`${BACKEND_URL}/messages/${messageData.id}`)\r\n      .then(() => {\r\n        dispatch(requestAllMessages(authId!));\r\n    });\r\n\r\n  };\r\n\r\n  return (\r\n    <div className=\"card-message border_bottom\">\r\n      <h3 className=\"card-message__time\">{getTimeInFormat(messageData.currentHour!)}</h3>\r\n      <div className={`card-message__marker card-message__marker_${messageData.role!}`}>\r\n        {messageData.role![0]}\r\n      </div>\r\n      <h4 className=\"card-message__email\">{messageData.email}</h4>\r\n      <div className=\"card-message__message\">{messageData.message}</div>\r\n      <div className=\"card-message__buttons\">\r\n        <button\r\n          className=\"button button__prim\"\r\n          onClick={() => handleOpenModalClick(MODAL_TYPES.VIEW)}\r\n        >\r\n          View\r\n        </button>\r\n        {authId === messageData.userId  && (\r\n          <React.Fragment>\r\n            <button\r\n              className=\"button button__prim\"\r\n              onClick={() => handleOpenModalClick(MODAL_TYPES.UPDATE)}\r\n            >\r\n              Update\r\n            </button>\r\n            <button\r\n              className=\"button button__prim\"\r\n              onClick={handleRemoveButtonClick}\r\n            >\r\n              Remove\r\n            </button>\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CardMessage;\r\n","function getDateInFormat(dateInMilliseconds: number): string {\r\n  const date = new Date(dateInMilliseconds);\r\n  const year = date.getFullYear();\r\n  const month = date.getMonth() + 1;\r\n  const day = date.getDate();\r\n  return `${day < 10 ? \"0\" + day : day}-${month < 10 ? \"0\" + month : month}-${year}`;\r\n}\r\n\r\nexport default getDateInFormat;\r\n","import React from \"react\";\r\n\r\nimport CardMessage from \"../../CardMessage\";\r\nimport getDateInFormat from \"../../../../services/getDateInFormat\";\r\nimport { GroupPropsType } from \"../../../../types/segmentGroupTypes\";\r\n\r\nconst SegmentGroup = ({ group }: { group: GroupPropsType }): JSX.Element => {\r\n  \r\n  return (\r\n    <div className=\"segment-group\">\r\n      <h3 className=\"segment-group__date\">{getDateInFormat(group.groupId)}</h3>\r\n      {group.messages.map((message, index) => message && (\r\n        <CardMessage key={index} messageData={message} groupId={group.groupId}/>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SegmentGroup;\r\n","function verificationFilterInput(currentValueInput: string):string {\r\n  // описать верификацию в формате dd/mm/yyyy\r\n  return currentValueInput;\r\n}\r\n\r\nexport default verificationFilterInput;\r\n","import isEmpty from \"./isEmpty\";\r\nimport { REG_EXP_CHECK_DATE } from '../data';\r\n\r\nexport type ValidationFilterFormPropsType = {\r\n  startParam: string\r\n  endParam: string\r\n}\r\nexport type ValidationFilterFormErrorsType = {\r\n  startParam?: string\r\n  endParam?: string\r\n  warning?:string \r\n}\r\nexport type ReturnValidationFilterFormType = {\r\n  errors: ValidationFilterFormErrorsType\r\n  isValid: boolean\r\n}\r\n\r\nfunction validationFilterForm(data: ValidationFilterFormPropsType): ReturnValidationFilterFormType {\r\n  const errors: ValidationFilterFormErrorsType = {};\r\n  if (!data.startParam.match(REG_EXP_CHECK_DATE)) {\r\n    errors.startParam = \"Date entered in the wrong format\";\r\n  }\r\n  if (!data.endParam.match(REG_EXP_CHECK_DATE)) {\r\n    errors.endParam = \"Date entered in the wrong format\";\r\n  }\r\n  if (isEmpty(data.startParam)) {\r\n    errors.startParam = \"Enter the date\";\r\n  }\r\n  if (isEmpty(data.endParam)) {\r\n    errors.endParam = \"Enter the date\";\r\n  }\r\n  return {\r\n    errors,\r\n    isValid: isEmpty(errors),\r\n  };\r\n}\r\n\r\nexport default validationFilterForm;\r\n","import { UserMessageDataType } from \"../types/messagesDataTypes\";\r\n\r\nexport default function groupMessagesByDay(messages: UserMessageDataType[]) {\r\n  const daysId = Array.from(new Set(messages.map((el) => el.dayId)));\r\n  return daysId.map(id => {\r\n    const daysId = id ? { groupId: id } : null;\r\n    return {\r\n      ...daysId,\r\n      messages: messages.filter(device => device.dayId === id)\r\n    };\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport SegmentGroup from \"./SegmentGroup\";\r\nimport verificationFilterInput from \"../../../services/verificationFilterInput\";\r\nimport getDateInFormat from \"../../../services/getDateInFormat\";\r\nimport validationFilterForm, { ValidationFilterFormPropsType, ValidationFilterFormErrorsType } from \"../../../services/validationFilterForm\";\r\nimport { UserMessageDataType } from '../../../types/messagesDataTypes';\r\nimport groupMessagesByDay from \"../../../services/groupMessagesByDay\";\r\n\r\nconst Segment = ({ propsMessages }: {propsMessages?: UserMessageDataType[]}): JSX.Element => {\r\n  const { messages } = useSelector((store: IStore) => store.messages);\r\n  \r\n  const [messagesLocalStorage, setMessagesLocalStorage] = React.useState<UserMessageDataType[]>([]);\r\n  const [errorsFilter, setErrorsFilter] = React.useState<ValidationFilterFormErrorsType>({});\r\n\r\n  const [paramsFilter, setParamFilter] = React.useState<ValidationFilterFormPropsType>({\r\n    startParam: \"\",\r\n    endParam: \"\",\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if(propsMessages){\r\n      setMessagesLocalStorage(propsMessages)\r\n    }else{\r\n      setMessagesLocalStorage(messages)\r\n    }\r\n  }, [messages, propsMessages]);\r\n\r\n\r\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setParamFilter({\r\n      ...paramsFilter,\r\n      [event.target.name]: verificationFilterInput(event.target.value),\r\n    });\r\n    setErrorsFilter({\r\n      ...errorsFilter,\r\n      [event.target.name]: \"\",\r\n      warning: \"\",\r\n    });\r\n  };\r\n\r\n  const handleSubmitForm = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    const { isValid, errors } = validationFilterForm(paramsFilter);\r\n    if (isValid) {\r\n      const arrayStartParam = paramsFilter.startParam.split(\"/\");\r\n      const arrayEndParam = paramsFilter.endParam.split(\"/\");\r\n      let indexStartParam = new Date(+arrayStartParam[2], +arrayStartParam[1] - 1, +arrayStartParam[0]).getTime();\r\n      let indexEndParam = new Date(+arrayEndParam[2], +arrayEndParam[1] - 1, +arrayEndParam[0]).getTime();\r\n\r\n      if (indexStartParam < indexEndParam) {\r\n        [indexStartParam, indexEndParam] = [indexEndParam, indexStartParam];\r\n        setParamFilter({\r\n          ...paramsFilter,\r\n          startParam: paramsFilter.endParam,\r\n          endParam: paramsFilter.startParam,\r\n        });\r\n        setErrorsFilter({\r\n          ...errorsFilter,\r\n          warning: \"Dates are swapped\",\r\n        });\r\n      }\r\n      const filteredData = messagesLocalStorage.filter((el: UserMessageDataType) => el.dayId! <= indexStartParam && el.dayId! >= indexEndParam);\r\n      setMessagesLocalStorage(filteredData);\r\n    } else {\r\n      setErrorsFilter(errors);\r\n    }\r\n  };\r\n\r\n  const handleResetButtonClick = () => {\r\n    if(propsMessages){\r\n      setMessagesLocalStorage(propsMessages)\r\n    }else{\r\n      setMessagesLocalStorage(messages)\r\n    }\r\n    setErrorsFilter({});\r\n  }\r\n\r\n  return (\r\n    <div className=\"segment\">\r\n      <div className=\"segment__header border_bottom\">\r\n        {/* возможно нужно вынести filter в отдельный компонент ??? */}\r\n        <h2 className=\"segment__header-title\">\r\n          {messagesLocalStorage.length > 1 &&\r\n            `Notes from ${getDateInFormat(messagesLocalStorage[0].dayId!)} to ${getDateInFormat(messagesLocalStorage[messagesLocalStorage.length - 1].dayId!)}`}\r\n\r\n          {messagesLocalStorage.length === 1 &&\r\n            `Notes for the ${getDateInFormat(messagesLocalStorage[0].dayId!)}`}\r\n\r\n          {messagesLocalStorage.length === 0 && `No notes`}\r\n        </h2>\r\n        <form className=\"filter-messages-form\" onSubmit={handleSubmitForm}>\r\n\r\n          <div className=\"filter-messages-form__warning-feedback\">{errorsFilter.warning}</div>\r\n\r\n          <div className=\"filter-messages-form__wrapper\">\r\n            <div className=\"filter-messages-form__group\">\r\n              <input\r\n                className=\"filter-messages-form__input\"\r\n                type=\"text\"\r\n                name=\"startParam\"\r\n                value={paramsFilter.startParam}\r\n                onChange={handleInputChange}\r\n                placeholder=\"dd/mm/yyyy\"\r\n              />\r\n\r\n              <div className=\"filter-messages-form__error-feedback\">{errorsFilter.startParam}</div>\r\n\r\n            </div>\r\n            <div className=\"filter-messages-form__group\">\r\n              <input\r\n                className=\"filter-messages-form__input\"\r\n                type=\"text\"\r\n                name=\"endParam\"\r\n                value={paramsFilter.endParam}\r\n                onChange={handleInputChange}\r\n                placeholder=\"dd/mm/yyyy\"\r\n              />\r\n\r\n              <div className=\"filter-messages-form__error-feedback\">{errorsFilter.endParam}</div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"filter-messages-form__buttons\">\r\n          <button className=\"button button__prim filter-messages-form__button\">\r\n            filter\r\n          </button>\r\n          <button type='button' className=\"button button__prim filter-messages-form__button\" onClick={handleResetButtonClick}>\r\n            reset\r\n          </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      {messagesLocalStorage && (\r\n        <React.Fragment>\r\n          {/*  Почему-то не получается вместо any подставить GroupPropsType, при этом в SegmentGroup props типизирован через  GroupPropsType*/}\r\n          {groupMessagesByDay(messagesLocalStorage).map((el: any, index: number) => <SegmentGroup key={index} group={el} /> )}\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Segment;\r\n","import React from \"react\";\r\nimport { useRouteMatch } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport Segment from \"../Calendar/Segment\";\r\nimport { Loading } from \"../../pages\";\r\n\r\nimport { UserMessageDataType } from \"../../types/messagesDataTypes\";\r\n\r\nimport { BACKEND_URL, USER_ROLES } from \"../../data\";\r\n\r\ntype MatchType = {\r\n  params: {\r\n    userId?: string;\r\n  };\r\n};\r\n\r\ntype SelectedUserDataState = {\r\n  email?: string;\r\n  id?: number;\r\n  name?: string;\r\n  role?: string;\r\n};\r\nconst SelectedUserData = (): JSX.Element => {\r\n  const { params: { userId } }: MatchType = useRouteMatch();\r\n\r\n  const [userData, setUserData] = React.useState<SelectedUserDataState | null>(null);\r\n  const [userMessages, setUserMessages] = React.useState<UserMessageDataType[] | null>(null);\r\n\r\n  const getAllDataUser = React.useCallback( async () => {\r\n    const user = await axios.get(`${BACKEND_URL}/data-users/${userId}`);\r\n    const messages = await axios.get(`${BACKEND_URL}/messages?userId=${userId}&_sort=dayId,currentHour&_order=asc`);\r\n\r\n    setUserData(user.data);\r\n    setUserMessages(messages.data);\r\n  },[userId]);\r\n\r\n  React.useEffect(() => {\r\n    getAllDataUser();\r\n  }, [getAllDataUser]);\r\n\r\n  const handleUpdateRoleClick = (role: string) => {\r\n    const updateDataUser = {\r\n      ...userData,\r\n      role,\r\n    };\r\n    axios\r\n      .put(`${BACKEND_URL}/data-users/${userData!.id}`, updateDataUser)\r\n      .then(() => {\r\n        getAllDataUser();\r\n      });\r\n    console.log(\r\n      `Смена роли пользователя ${userData!.email} с ${\r\n        userData!.role\r\n      } на ${role} с последующим запросом на обновленный лист users`\r\n    );\r\n  };\r\n\r\n  return userMessages && userData ? (\r\n    <React.Fragment>\r\n      {/* Возможно нужно вынести в отдельный компонент и переписать логику запросов */}\r\n      <div className=\"user-update\">\r\n        <div className=\"user-update__group\">\r\n          <h2 className=\"user-update-role__email\">{userData.email}</h2>\r\n          <div className=\"user-update-role__buttons\">\r\n            <button\r\n              className={`button button__add ${\r\n                userData.role === USER_ROLES.USER ? \"button_selected\" : \"\"\r\n              }`}\r\n              onClick={() => handleUpdateRoleClick(USER_ROLES.USER)}\r\n            >\r\n              {USER_ROLES.USER}\r\n            </button>\r\n            <button\r\n              className={`button button__add ${\r\n                userData.role === USER_ROLES.ADMIN ? \"button_selected\" : \"\"\r\n              }`}\r\n              onClick={() => handleUpdateRoleClick(USER_ROLES.ADMIN)}\r\n            >\r\n              {USER_ROLES.ADMIN}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Segment propsMessages={userMessages} />\r\n    </React.Fragment>\r\n  ) : (\r\n    <Loading />\r\n  );\r\n};\r\n\r\nexport default SelectedUserData;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport { openModal, setCurrentHour } from \"../../../redux/actions\";\r\nimport getTimeInFormat from \"../../../services/getTimeInFormat\";\r\n\r\nimport { MODAL_TYPES, USER_ROLES } from '../../../data';\r\n\r\nconst CardEmpty = ({ currentHour }: { currentHour: number }): JSX.Element => {\r\n  const { role } = useSelector((store: IStore) => store.auth.user);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleOpenModalClick = () => {\r\n    dispatch(setCurrentHour(currentHour));\r\n    dispatch(openModal(MODAL_TYPES.ADD));\r\n  };\r\n\r\n  return (\r\n    <div className=\"card-message border_bottom\">\r\n      <h3 className=\"card-message__time\">{getTimeInFormat(currentHour)}</h3>\r\n      <div className=\"card-message__message\">Add note...</div>\r\n      <div className=\"card-message__buttons\">\r\n        {USER_ROLES.VIEWER !== role && (\r\n          <button\r\n            className=\"button button__prim\"\r\n            onClick={handleOpenModalClick}\r\n          >\r\n            Add\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CardEmpty;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport CardMessage from \"../CardMessage\";\r\nimport { UserMessageDataType } from '../../../types/messagesDataTypes';\r\nimport getDateInFormat from '../../../services/getDateInFormat';\r\nimport CardEmpty from \"../CardEmpty\";\r\n\r\nconst Day = (): JSX.Element => {\r\n  const { idSelectedDate, selectedDate } = useSelector((store: IStore) => store.calendar);\r\n  const { messages } = useSelector((store: IStore) => store.messages);\r\n  const { id } = useSelector((store: IStore) => store.auth.user);\r\n  const messagesTargetDay = messages.filter((messagesDay: UserMessageDataType) => messagesDay.dayId === idSelectedDate && messagesDay.userId === id);\r\n\r\n  return (\r\n    <div className=\"day-list\">\r\n      <div className=\"day-list__header border_bottom\">\r\n        <div className=\"day-list__day-name\">\r\n          {getDateInFormat(selectedDate!.getTime())}\r\n        </div>\r\n      </div>\r\n      <div className=\"day-list__group\">\r\n        {Array(24).fill(null).map((el, index: number) => {\r\n          const message = messagesTargetDay.find(el=> el.currentHour === index);\r\n          if(message) return <CardMessage key={index} messageData={message} />\r\n          return <CardEmpty key={index} currentHour={index} />\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Day;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport IStore from \"../../../../redux/interfaceStore\";\r\nimport { UserMessageDataType } from '../../../../types/messagesDataTypes';\r\nimport isEmpty from '../../../../services/isEmpty';\r\nimport { updateSelectedDate } from \"../../../../redux/actions\";\r\nimport { DayDataType } from \"../../../../redux/calendar/calendarReducer\";\r\nimport getTimeInFormat from \"../../../../services/getTimeInFormat\";\r\n\r\nexport interface DayOfTheWeekPropsType extends RouteComponentProps<any> {\r\n  dayData: DayDataType;\r\n}\r\nconst DayOfTheWeek = ({ history, dayData: { date, isCurrentMonth }}: DayOfTheWeekPropsType): JSX.Element => {\r\n  const { messages } = useSelector((store: IStore) => store.messages);\r\n  const { id } = useSelector((store: IStore) => store.auth.user);\r\n  const dispatch = useDispatch();\r\n  const { path } = useRouteMatch();\r\n  const [localStorage, setLocalStorage] = React.useState<UserMessageDataType[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    setLocalStorage([]);\r\n    const messagesDay = messages.filter((el: UserMessageDataType) => el.dayId === date.getTime() && el.userId === id).slice(0,3);\r\n    if(!isEmpty(messagesDay)){\r\n      setLocalStorage(messagesDay);\r\n    } \r\n  }, [date, id, messages]);\r\n\r\n  const handleSelectedDateClick = () => {\r\n    dispatch(updateSelectedDate(date));\r\n    history.push(`${path}/day`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"month-list__day\">\r\n      <div\r\n        className={`month-list__day-header ${\r\n          isCurrentMonth\r\n            ? \"month-list__day-header_current\"\r\n            : \"month-list__day-header_other\"\r\n        }`}\r\n        onClick={handleSelectedDateClick}\r\n      >\r\n        <div className=\"month-list__day-number\">{date.getDate()}</div>\r\n      </div>\r\n      <ul className=\"month-list__day-tasks\">\r\n        {!isEmpty(localStorage) &&\r\n          localStorage.map((el, index: number) => (\r\n            <li key={index} className=\"month-list__day-task\">\r\n              <h3 className=\"month-list__day-task-time\">\r\n                {getTimeInFormat(el.currentHour!)}\r\n              </h3>\r\n              <p className=\"month-list__day-task-text\">{el.message}</p>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(DayOfTheWeek);\r\n","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\n\r\nimport { DayDataType } from \"../../../../redux/calendar/calendarReducer\";\r\nimport DayOfTheWeek from \"../DayOfTheWeek\";\r\n\r\nexport interface WeekOfTheMonthPropTypes extends RouteComponentProps<any> {\r\n  weekData: DayDataType[];\r\n  weekNumber: number;\r\n}\r\n\r\nconst WeekOfTheMonth = ({ weekData, weekNumber }: WeekOfTheMonthPropTypes): JSX.Element => {\r\n  return (\r\n    <div key={weekNumber} className=\"month-list__week border_bottom\">\r\n      {weekData.map((day, index) => (\r\n        <DayOfTheWeek key={index} dayData={day} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(WeekOfTheMonth);\r\n","import React from \"react\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport { DayDataType } from \"../../../redux/calendar/calendarReducer\";\r\nimport WeekOfTheMonth from './WeekOfTheMonth';\r\n\r\nimport { WEEK_DAY_NAMES } from '../../../data';\r\n\r\nconst Month = (): JSX.Element => {\r\n  const { data } = useSelector((store: IStore) => store.calendar);\r\n  \r\n  return  (\r\n    <div className=\"month-list\">\r\n      <div className=\"month-list__header border_bottom\">\r\n        {WEEK_DAY_NAMES.map((name, index) => (\r\n          <span key={index} className=\"month-list__day-name\">\r\n            {name}\r\n          </span>\r\n        ))}\r\n      </div>\r\n      {data?.map((week: DayDataType[], index: number) => (\r\n        <WeekOfTheMonth key={index} weekData={week} weekNumber={index} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\nexport default Month;\r\n","import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\n\r\nimport Day from \"./Day\";\r\nimport Segment from \"./Segment\";\r\nimport Month from \"./Month\";\r\nimport { SelectedUserData } from \"..\";\r\n\r\nconst Calendar = (): JSX.Element => {\r\n  return (\r\n    <div className=\"calendar\">\r\n      <Switch>\r\n        <Route exact path=\"/calendar\" component={Month} />\r\n        <Route exact path=\"/calendar/user-data/:userId\" component={SelectedUserData} />\r\n        <Route exact path=\"/calendar/segment\" component={Segment} />\r\n        <Route exact path=\"/calendar/day\" component={Day} />\r\n        {/* <Route component={NotFound} /> */}\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calendar;\r\n","import React from \"react\";\r\nimport { withRouter, useRouteMatch } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport IStore from \"../../../../redux/interfaceStore\";\r\nimport { DayOfTheWeekPropsType } from \"../../Month/DayOfTheWeek\";\r\nimport { updateSelectedDate } from \"../../../../redux/actions\";\r\n\r\nconst WidgetDayOfTheWeek = ({ history, dayData: { date, isCurrentMonth } }: DayOfTheWeekPropsType): JSX.Element => {\r\n  const { path } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n  const { selectedDate, currentDate } = useSelector((store: IStore) => store.calendar);\r\n\r\n  const isCurrentDate = currentDate!.getTime() === date.getTime();\r\n  const isSelectedDate = selectedDate && selectedDate.getTime() === date.getTime();\r\n  \r\n  const handleSelectedDateClick =()=>{\r\n    dispatch(updateSelectedDate(date))\r\n    history.push(`${path}/day`);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`widget-month__day \r\n      ${!isCurrentMonth ? \"widget-month__day_shadowed\" : \"\"} \r\n      ${isCurrentDate ? \"widget-month__day_current\" : \"\"}\r\n      ${isSelectedDate ? \"widget-month__day_selected\" : \"\"}`}\r\n      onClick={handleSelectedDateClick}\r\n    >\r\n      <span className=\"widget-month__day__number\">{date.getDate()}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(WidgetDayOfTheWeek);","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { WeekOfTheMonthPropTypes } from \"../../Month/WeekOfTheMonth\";\r\nimport WidgetDayOfTheWeek from \"../WidgetDayOfTheWeek\";\r\n\r\nconst WidgetWeekOfTheMonth = ({ weekData, weekNumber }: WeekOfTheMonthPropTypes) => {\r\n  return (\r\n    <div key={weekNumber} className=\"widget-month__week\">\r\n      {weekData.map((day, index: number) => (\r\n        <WidgetDayOfTheWeek key={index} dayData={day} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(WidgetWeekOfTheMonth);\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport { updateDataMonth } from \"../../../redux/actions\";\r\n\r\nconst MonthToggle = (): JSX.Element => {\r\n  const dispatch = useDispatch();\r\n  const { basicDate } = useSelector((store: IStore) => store.calendar);\r\n\r\n  const handlePrevMonthButtonClick = () => {\r\n    const date = new Date(basicDate!.getFullYear(), basicDate!.getMonth() - 1);\r\n    dispatch(updateDataMonth(date));\r\n  };\r\n\r\n  const handleNextMonthButtonClick = () => {\r\n    const date = new Date(basicDate!.getFullYear(), basicDate!.getMonth() + 1);\r\n    dispatch(updateDataMonth(date));\r\n  };\r\n\r\n  return (\r\n    <div className=\"month-toggle\">\r\n      <button\r\n        className=\"month-toggle__button\"\r\n        onClick={handlePrevMonthButtonClick}\r\n      >\r\n        ❮\r\n      </button>\r\n      <button\r\n        className=\"month-toggle__button\"\r\n        onClick={handleNextMonthButtonClick}\r\n      >\r\n        ❯\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nexport default MonthToggle;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../../redux/interfaceStore\";\r\nimport { DayDataType } from \"../../../redux/calendar/calendarReducer\";\r\nimport WidgetWeekOfTheMonth from \"./WidgetWeekOfTheMonth\";\r\nimport MonthToggle from \"../MonthToggle\";\r\n\r\nimport { MONTH_NAMES, WEEK_DAY_NAMES } from '../../../data';\r\n\r\nconst WidgetMonth = (): JSX.Element => {\r\n  const { basicDate, data } = useSelector((store: IStore) => store.calendar);\r\n\r\n  return (\r\n    <div className=\"widget-month border_bottom\">\r\n      <div className=\"widget-month__header border_bottom\">\r\n        <h3 className=\"widget-month__date\">\r\n          {MONTH_NAMES[basicDate!.getMonth()]}{\" \"}\r\n          {basicDate!.getFullYear()}\r\n        </h3>\r\n        <MonthToggle />\r\n      </div>\r\n      <div className=\"widget-month__list border_bottom\">\r\n        <div className=\"widget-month__list-header\">\r\n          {WEEK_DAY_NAMES.map((name: string, index: number) => (\r\n            <span key={index} className=\"widget-month__day-name\">\r\n              {name}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        {data!.map((weekData: DayDataType[], index: number) => (\r\n          <WidgetWeekOfTheMonth\r\n            key={index}\r\n            weekData={weekData}\r\n            weekNumber={index}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WidgetMonth;\r\n","import React from \"react\";\r\nimport { Link, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport { ModelUserType } from \"../../../services/getModelUser\";\r\n\r\nconst UserItem = ({ user }: { user: ModelUserType }): JSX.Element => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <li className={`user user_decor-${user.role}`}>\r\n      <Link to={`${path}/user-data/${user.id}`}>\r\n        <h4 className=\"user__email\">{user.email}</h4>\r\n      </Link>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default UserItem;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport UserItem from \"./UserItem\";\r\nimport { ModelUserType } from \"../../services/getModelUser\";\r\nimport IStore from \"../../redux/interfaceStore\";\r\n\r\nimport { BACKEND_URL } from '../../data';\r\n\r\nconst UsersList = (): JSX.Element => {\r\n  const { id } = useSelector((store: IStore) => store.auth.user);\r\n  const [isLoaded, setIsLoaded] = React.useState(false);\r\n  const [listUsers, setListUsers] = React.useState<ModelUserType[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    axios\r\n      .get(`${BACKEND_URL}/data-users/?id_ne=${id}`)\r\n      .then((res) => {\r\n        const listUsers = res.data;\r\n        setListUsers(listUsers);\r\n        setIsLoaded(true);\r\n      });\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className=\"users-list\">\r\n      <h2 className=\"users-list__title border_bottom\">All users</h2>\r\n      {isLoaded ? (\r\n        <ul className=\"users-list__users border_bottom\">\r\n          {listUsers.map((user: ModelUserType, index: number) => (\r\n            <UserItem key={index} user={user} />\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <div>Loading</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersList;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport WidgetMonth from '../Calendar/WidgetMonth';\r\nimport UsersList from \"../UsersList\";\r\n\r\nimport { USER_ROLES } from '../../data';\r\n\r\nconst SideBar = ({ isOpenSideBar }: { isOpenSideBar: boolean }): JSX.Element => {\r\n  const { role, email } = useSelector((store: IStore) => store.auth.user);\r\n\r\n  return (\r\n    <div className={`side-bar ${isOpenSideBar ? \"side-bar_visible\" : \"\"}`}>\r\n      <div className ='side-bar__wrapper'>\r\n      <h2 className=\"side-bar__email border_bottom\">{email}</h2>\r\n\r\n      <WidgetMonth />\r\n      {role === USER_ROLES.ADMIN ? <UsersList /> : null}\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SideBar;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport { updateDataMonth, updateSelectedDate } from \"../../redux/actions\";\r\nimport MonthToggle from \"../Calendar/MonthToggle\";\r\n\r\nimport { MONTH_NAMES } from '../../data';\r\n\r\ntype HeaderPropsType = {\r\n  isOpenSideBar: boolean;\r\n  setIsOpenSideBar: React.Dispatch<boolean>;\r\n}\r\n\r\nconst Header = ({ isOpenSideBar, setIsOpenSideBar }: HeaderPropsType): JSX.Element => {\r\n    // Не знаю как решить данную проблему, связанную с вариативностью типов basicDate, currentDate\r\n  const dispatch = useDispatch();\r\n  const { basicDate, currentDate } = useSelector((store: IStore) => store.calendar);\r\n  const { email } = useSelector((store: IStore) => store.auth.user);\r\n\r\n  const handleCurrentDateButtonClick = () => {\r\n    dispatch(updateSelectedDate(currentDate!));\r\n    dispatch(updateDataMonth(currentDate!));\r\n  };\r\n  \r\n  const handleToggleAsideButtonClick = () => {\r\n    setIsOpenSideBar(!isOpenSideBar);\r\n  };\r\n\r\n  return (\r\n    <header className=\"header border_bottom\">\r\n      <div className=\"wrapper\">\r\n        <div className=\"header__wrapper\">\r\n          <div className=\"header__group\">\r\n            <span className=\"hamburger\" onClick={handleToggleAsideButtonClick}>\r\n              <span className=\"hamburger__line\"></span>\r\n            </span>\r\n            <h2 className=\"header__email\">{email}</h2>\r\n            <MonthToggle />\r\n            <h2 className=\"header__date\">\r\n              {MONTH_NAMES[basicDate!.getMonth()]}{\" \"}\r\n              {basicDate!.getFullYear()}\r\n            </h2>\r\n            <Link to=\"/calendar\" className=\"button header__button button__add\">\r\n              calendar\r\n            </Link>\r\n            <Link to=\"/calendar/segment\" className=\"button header__button button__add\">\r\n              all notes\r\n            </Link>\r\n            <Link\r\n              to=\"/calendar/day\"\r\n              className=\"button header__button button__add\"\r\n              onClick={handleCurrentDateButtonClick}\r\n            >\r\n              today\r\n            </Link>\r\n          </div>\r\n\r\n          <Link to=\"/logout\" className=\"button header__button button__add\">\r\n            logout\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { useSelector } from \"react-redux\";\r\nimport IStore from \"../redux/interfaceStore\";\r\nimport { UserMessageDataType } from \"../types/messagesDataTypes\";\r\nimport isEmpty from \"../services/isEmpty\";\r\n\r\nexport default function useModalMessageObject(){\r\n  const modalMessageObject: UserMessageDataType = useSelector((store:IStore) => store.modal.modalData);\r\n  const { idSelectedDate, currentHour } = useSelector((store: IStore) => store.calendar);\r\n  const { email, id, role } = useSelector((store: IStore) => store.auth.user); \r\n\r\n  if(!isEmpty(modalMessageObject)){\r\n    return modalMessageObject\r\n  }else{\r\n    return {\r\n      userId: id!,\r\n      title: \"\",\r\n      message: \"\",\r\n      currentHour: currentHour!,\r\n      email: email!,\r\n      role: role!,\r\n      dayId: idSelectedDate!,\r\n    } \r\n  }\r\n}","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport isEmpty from \"../../services/isEmpty\";\r\nimport getDateInFormat from \"../../services/getDateInFormat\";\r\nimport getTimeInFormat from \"../../services/getTimeInFormat\";\r\nimport { UserMessageDataType } from '../../types/messagesDataTypes';\r\nimport { requestAllMessages, setCurrentHour, closeModal } from \"../../redux/actions\";\r\n\r\nimport { BACKEND_URL, MODAL_TYPES } from '../../data';\r\nimport useModalMessageObject from \"../../hooks/useMessageObject\";\r\n\r\nfunction AddUpdateMessageModal(): JSX.Element {\r\n  const dispatch = useDispatch();\r\n\r\n  const messageObject = useModalMessageObject();\r\n  const { modalType } = useSelector((store: IStore) => store.modal);\r\n  const [stateMessageModal, setStateMessageModal] = React.useState<UserMessageDataType>(messageObject);\r\n\r\n  const handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\r\n    setStateMessageModal({\r\n      ...stateMessageModal,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleAddUpdateButtonClick = () => {\r\n    if (!isEmpty(stateMessageModal.message)) {\r\n      if (stateMessageModal.id) {\r\n        axios\r\n          .put( `${BACKEND_URL}/messages/${stateMessageModal.id}`, stateMessageModal)\r\n          .then(() => {\r\n            dispatch(requestAllMessages(stateMessageModal.userId!));\r\n            dispatch(setCurrentHour(null));\r\n            dispatch(closeModal());\r\n          });\r\n      } else {\r\n        axios\r\n          .post(`${BACKEND_URL}/messages`, stateMessageModal)\r\n          .then(() => {\r\n            dispatch(requestAllMessages(stateMessageModal.userId!));\r\n            dispatch(setCurrentHour(null));\r\n            dispatch(closeModal());\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-update-message-card\">\r\n      <div className=\"add-update-message-card__header\">\r\n\r\n        <h3 className=\"add-update-message-card__date\">\r\n          Date: {getDateInFormat(stateMessageModal.dayId!)} \r\n          <br />\r\n          <br /> \r\n          Time: {getTimeInFormat(stateMessageModal.currentHour!)}\r\n        </h3>\r\n\r\n        <h3 className=\"add-update-message-card__author\">{stateMessageModal.email}</h3>\r\n\r\n      </div>\r\n\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"title\"\r\n        className=\"input add-update-message-card__input\"\r\n        name=\"title\"\r\n        value={stateMessageModal.title}\r\n        onChange={handleInputChange}\r\n      />\r\n\r\n      <textarea\r\n        placeholder=\"note\"\r\n        className=\"input add-update-message-card__textarea\"\r\n        name=\"message\"\r\n        value={stateMessageModal.message}\r\n        onChange={handleInputChange}\r\n      />\r\n\r\n      <div className=\"add-update-message-card__buttons\">\r\n        {MODAL_TYPES.UPDATE === modalType && (\r\n          <button\r\n            className=\"button button__prim\"\r\n            onClick={handleAddUpdateButtonClick}\r\n          >\r\n            update\r\n          </button>\r\n        )}\r\n\r\n        {MODAL_TYPES.ADD === modalType && (\r\n          <button\r\n            className=\"button button__prim\"\r\n            onClick={handleAddUpdateButtonClick}\r\n          >\r\n            add\r\n          </button>\r\n        )}\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddUpdateMessageModal;\r\n","import React from \"react\";\r\n\r\nimport getDateInFormat from \"../../services/getDateInFormat\";\r\nimport getTimeInFormat from \"../../services/getTimeInFormat\";\r\nimport useModalMessageObject from \"../../hooks/useMessageObject\";\r\n\r\nfunction ViewMessageModal(): JSX.Element {\r\n\r\n  const messageObject = useModalMessageObject();\r\n\r\n  return (\r\n    <div className=\"view-message-card\">\r\n      <div className=\"view-message-card__header\">\r\n        <h3 className=\"view-message-card__date\">\r\n          Date: {getDateInFormat(messageObject.dayId!)}\r\n          <br />\r\n          <br />\r\n          Time: {getTimeInFormat(messageObject.currentHour!)}\r\n        </h3>\r\n        <h3 className=\"view-message-card__author\">\r\n          {messageObject.email}\r\n        </h3>\r\n      </div>\r\n      <h2 className=\"view-message-card__title\">\r\n        {messageObject.title}\r\n      </h2>\r\n      <p className=\"view-message-card__text\">\r\n        {messageObject.message}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewMessageModal;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport AddUpdateMessageModal from \"../AddUpdateMessageModal\";\r\nimport ViewMessageModal from \"../ViewMessageModal\";\r\nimport { closeModal, setCurrentHour } from \"../../redux/actions\";\r\n\r\nimport { MODAL_TYPES } from '../../data';\r\n\r\nfunction Modal():JSX.Element {\r\n  const { modalType } = useSelector((store: IStore) => store.modal);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleCloseButtonClick = () => {\r\n    dispatch(setCurrentHour(null));\r\n    \r\n    dispatch(closeModal());\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal modal_visibility\">\r\n      <div className=\"modal__wrapper\">\r\n        <span\r\n          className=\"modal__close-button\"\r\n          onClick={handleCloseButtonClick}\r\n        ></span>\r\n        {MODAL_TYPES.ADD === modalType && <AddUpdateMessageModal />}\r\n        {MODAL_TYPES.UPDATE === modalType && <AddUpdateMessageModal />}\r\n        {MODAL_TYPES.VIEW === modalType && <ViewMessageModal />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport {Redirect, Link} from 'react-router-dom';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport { SignInForm, SignUpForm } from \"../../components\";\r\n\r\nconst Login = (): JSX.Element => {\r\n  const [isSignUpForm, toggleIsSignUpForm] = React.useState(false);\r\n  const [registerUserEmail, setRegisterUserEmail] = React.useState('');\r\n  const isAuthenticated = useSelector((state: IStore) => state.auth.isAuthenticated);\r\n\r\n  const handleToggleButtonClick = () => {\r\n    toggleIsSignUpForm(!isSignUpForm);\r\n  };\r\n\r\n  return isAuthenticated ? (\r\n    <Redirect exact to='/calendar' />\r\n  ) : (\r\n    <div className=\"login\">\r\n      <div className='wrapper'>\r\n      <div className=\"login__wrapper\">\r\n      <Link to ='/' className=\"button login__button button__add\">landing page</Link>\r\n        {isSignUpForm ? (\r\n          <SignUpForm handleToggleButtonClick={handleToggleButtonClick} setRegisterUserEmail={setRegisterUserEmail}/>\r\n        ) : (\r\n          <SignInForm handleToggleButtonClick={handleToggleButtonClick} registerUserEmail={registerUserEmail}/>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { setAuthUser } from \"../../redux/actions\";\r\nimport setAuthToken from \"../../services/setAuthToken\";\r\n\r\nconst Logout = (): JSX.Element => {\r\n  const dispatch = useDispatch();\r\n\r\n  React.useEffect(() => {\r\n    localStorage.removeItem(\"accessToken\");\r\n    setAuthToken(false);\r\n    dispatch(setAuthUser({}));\r\n  }, [dispatch]);\r\n\r\n  return <Redirect exact to=\"/\" />;\r\n};\r\n\r\nexport default Logout;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useRouteMatch } from \"react-router-dom\";\r\n\r\nconst NotFound = (): JSX.Element => {\r\n  const [redirect, setRedirect] = React.useState(false);\r\n  const match = useRouteMatch();\r\n\r\n  const handleRedirectButtonClick = () => {\r\n    setRedirect(true);\r\n  };\r\n\r\n  return redirect ? (\r\n    <Redirect exact to={match.url} />\r\n  ) : (\r\n    <div className=\"not-found\">\r\n      <div className=\"wrapper\">\r\n        <div className=\"not-found__wrapper\">\r\n          <h2 className=\"not-found__title\">NotFound</h2>\r\n          <button\r\n            className=\"button button__add\"\r\n            onClick={handleRedirectButtonClick}\r\n          >\r\n            to home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport IStore from \"../../redux/interfaceStore\";\r\nimport { MainWrapper, Calendar, Header, SideBar, Modal } from \"../../components\";\r\n\r\nconst Main = ():JSX.Element => {\r\n  const { isAuthenticated } = useSelector((state: IStore) => state.auth);\r\n  const { isOpenModal } = useSelector((state: IStore) => state.modal);\r\n  const [isOpenSideBar, setIsOpenSideBar] = React.useState(true);\r\n\r\n  return !isAuthenticated ? (\r\n    <Redirect to=\"/login\" />\r\n  ) : (\r\n    <MainWrapper>\r\n      <Header\r\n        isOpenSideBar={isOpenSideBar}\r\n        setIsOpenSideBar={setIsOpenSideBar}\r\n      />\r\n      <div className=\"main\">\r\n        <div className=\"wrapper\">\r\n          <div className=\"main__wrapper\">\r\n            <SideBar isOpenSideBar={isOpenSideBar} />\r\n            <Calendar />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {isOpenModal && <Modal />}\r\n    </MainWrapper>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nconst Loading = (): JSX.Element => {\r\n  return (\r\n    <div className=\"loading\">\r\n      <h2 className=\"loading__title\">Loading</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\n\r\nimport { Landing, Login, Logout, NotFound, Main } from \"./pages\";\r\nimport setAuthToken from \"./services/setAuthToken\";\r\nimport { setAuthUser } from \"./redux/actions\";\r\nimport { DecodedTokenType } from \"./types/decodedTokenTypes\";\r\nimport { ModelUserType } from './services/getModelUser'; \r\n\r\nimport { BACKEND_URL } from './data';\r\n\r\nimport \"./scss/style.scss\";\r\n\r\nconst App = (): JSX.Element => {\r\n  const dispatch = useDispatch();\r\n  \r\n  React.useEffect(() => {\r\n    //  возможно нужно всю логику перенести в actions redux, services или создать свой хук???\r\n    if (localStorage.accessToken) {\r\n      const decodedToken: DecodedTokenType = jwt_decode(localStorage.accessToken);\r\n      const idUser = decodedToken.sub;\r\n      const currentTime = Date.now() / 1000;\r\n      if (decodedToken.exp < currentTime) {\r\n        localStorage.removeItem(\"accessToken\");\r\n        setAuthToken(false);\r\n        dispatch(setAuthUser({}));\r\n      } else {\r\n        setAuthToken(localStorage.accessToken);\r\n        axios\r\n          .get(`${BACKEND_URL}/data-users/${idUser}`)\r\n          .then((res: { data: ModelUserType }) => {\r\n            dispatch(setAuthUser(res.data))\r\n          })\r\n          .catch(() => {\r\n            console.log(\r\n              \"В данный момент имеются проблемы с сервером, попробуйте зайти позже...\"\r\n            );\r\n          });\r\n      }\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Landing} />\r\n          <Route path=\"/calendar\" component={Main} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/logout\" component={Logout} />\r\n          <Route component={NotFound} />\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport store from \"./redux\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}