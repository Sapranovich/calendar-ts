(this["webpackJsonpcalendar-ts"]=this["webpackJsonpcalendar-ts"]||[]).push([[0],{167:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(24),r=a.n(c),i=a(3),o=a(18),d=a(58),l=a(4);var u=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},m="SET_AUTH_USER",j="SET_LOADED",b={isAuthenticated:!1,isLoaded:!1,user:{}};var h="ADD",O="UPDATE",_="VIEW",p="admin",g="user",f="viewer",x="^(?=\\d{2}([\\/])\\d{2}\\1\\d{4}$)(?:0[1-9]|1\\d|[2][0-8]|29(?!.02.(?!(?!(?:[02468][1-35-79]|[13579][0-13-57-9])00)\\d{2}(?:[02468][048]|[13579][26])))|30(?!.02)|31(?=.(?:0[13578]|10|12))).(?:0[1-9]|1[012]).\\d{4}$",v="https://my-cool-project-123.herokuapp.com",N=["January","February","March","April","May","June","July","August","September","October","November","December"],y=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],w=[31,28,31,30,31,30,31,31,30,31,30,31];var D=function(e,t){for(var a=[],n=new Date(e,t),s=function(e){var t=e.getMonth();return function(e){return!(e%4||!(e%100)&&e%400)}(e.getFullYear())&&1===t?w[t]+1:w[t]}(n),c=function(e){var t=e.getDay();return 0===t?6:t-1}(n),r=1,i=0;i<(s+c)/7;i++){a[i]=[];for(var o=0;o<7;o++)a[i][o]=0===i&&o<c?{date:new Date(e,t,r-(c-o)),isCurrentMonth:!1}:r>s?{date:new Date(e,t,r++),isCurrentMonth:!1}:{date:new Date(e,t,r++),isCurrentMonth:!0}}return a},k="SET_ALL_START_DATES",S="UPDATE_DATA_MONTH",E="SET_CURRENT_HOUR",T="UPDATE_SELECTED_DATE",C={data:null,basicDate:null,currentDate:null,currentHour:null,selectedWeek:null,selectedDate:null,idSelectedDate:null};var I="SET_ALL_MESSAGES",A={isNoMessages:!1,isLoadedMessages:!1,messages:[]};var M="SET_ALL_USERS",P={isLoaded:!1,users:[]};var L="OPEN_MODAL",H="SET_MODAL_DATA",F="CLOSE_MODAL",U={isOpenModal:!1,modalType:null,modalData:{}};var B=Object(o.c)({calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(l.a)(Object(l.a)({},e),{},{data:D(t.payload.getFullYear(),t.payload.getMonth()),currentDate:t.payload,basicDate:t.payload});case S:return Object(l.a)(Object(l.a)({},e),{},{data:D(t.payload.getFullYear(),t.payload.getMonth()),basicDate:t.payload});case E:return Object(l.a)(Object(l.a)({},e),{},{currentHour:t.payload});case T:return Object(l.a)(Object(l.a)({},e),{},{selectedDate:t.payload,idSelectedDate:t.payload.getTime()});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(l.a)(Object(l.a)({},e),{},{isOpenModal:!0,modalType:t.payload});case H:return Object(l.a)(Object(l.a)({},e),{},{modalData:t.payload});case F:return U;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!u(t.payload),user:t.payload});case j:return Object(l.a)(Object(l.a)({},e),{},{isLoaded:t.payload});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),{},{isNoMessages:u(t.payload),isLoadedMessages:!0,messages:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(l.a)(Object(l.a)({},e),{},{isLoaded:!0,users:t.payload});default:return e}}}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,R=Object(o.e)(B,q(Object(o.a)(d.a))),Y=a(7),V=a.n(Y),J=a(20),W=a(8),X=a(9),$=a(0),z=function(){return Object($.jsx)("div",{className:"landing",children:Object($.jsx)("div",{className:"wrapper",children:Object($.jsx)("div",{className:"landing__wrapper",children:Object($.jsxs)("div",{className:"landing__group",children:[Object($.jsx)("h1",{className:"landing__title",children:"Calendar"}),Object($.jsx)(W.b,{to:"/calendar",className:"button button__add",children:"get started"})]})})})})},G=a(6);function K(e){return{type:m,payload:e}}function Q(e){return{type:j,payload:e}}var Z=function(e){return{type:L,payload:e}},ee=function(){return{type:F}},te=function(e){return function(t){V.a.get("".concat(v,"/messages?userId=").concat(e,"&_sort=dayId,currentHour&_order=asc")).then((function(e){var a=e.data;t(function(e){return{type:I,payload:e}}(a))}))}};function ae(e){return{type:E,payload:e}}function ne(e){return{type:T,payload:e}}function se(e){return{type:S,payload:e}}var ce=function(e){var t=e.children,a=Object(i.c)((function(e){return e.auth})).isLoaded,n=Object(i.c)((function(e){return e.auth.user})),c=n.id,r=n.role,o=Object(i.b)();return s.a.useEffect((function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return o(function(e){return{type:k,payload:e}}(t)),o(te(c)),setTimeout((function(){return o(Q(!0))}),1e3),function(){return o(Q(!1))}}),[o,c,r]),Object($.jsx)(s.a.Fragment,{children:a?t:Object($.jsx)(ze,{})})},re=a(12),ie=a(10),oe=a.n(ie);var de=function(e){var t={};return oe.a.isEmail(e.email)||(t.email="Email entered incorrectly"),oe.a.isEmpty(e.email)&&(t.email="Enter your email"),oe.a.isLength(e.password,{min:6,max:30})||(t.password="The password must be at least 6 characters long"),oe.a.isEmpty(e.password)&&(t.password="Enter password"),{errors:t,isValid:u(t)}};var le=function(e){V.a.defaults.headers.common.Authorization=e||null},ue=function(e){var t=e.handleToggleButtonClick,a=e.registerUserEmail,n=Object(i.b)(),c=s.a.useState({email:"",password:""}),r=Object(G.a)(c,2),o=r[0],d=r[1],u=s.a.useState({}),m=Object(G.a)(u,2),j=m[0],b=m[1],h=function(e){d(Object(l.a)(Object(l.a)({},o),{},Object(re.a)({},e.target.name,e.target.value))),b(Object(l.a)(Object(l.a)({},j),{},Object(re.a)({request:""},e.target.name,"")))};s.a.useEffect((function(){a&&d(Object(l.a)(Object(l.a)({},o),{},{email:a}))}),[a]);return Object($.jsxs)("form",{className:"sign-in-form",onSubmit:function(e){e.preventDefault();var t=de(o),a=t.isValid,s=t.errors;a?V.a.post("".concat(v,"/signin"),o).then((function(e){var t=e.data.accessToken;localStorage.setItem("accessToken",t),le(t);var a=Object(J.a)(t).sub;V.a.get("".concat(v,"/data-users/").concat(a)).then((function(e){return n(K(e.data))}))})).catch((function(e){b({request:e.response.data})})):b(s)},children:[Object($.jsx)("h2",{className:"sign-in-form__title",children:"Sign In"}),Object($.jsx)("div",{className:"sign-in-form__error-request-feedback",children:j.request}),Object($.jsxs)("div",{className:"sign-in-form__group",children:[Object($.jsx)("input",{type:"text",placeholder:"Email",className:"input sign-in-form__input",name:"email",value:o.email,onChange:h}),Object($.jsx)("div",{className:"sign-in-form__error-feedback",children:j.email})]}),Object($.jsxs)("div",{className:"sign-in-form__group",children:[Object($.jsx)("input",{type:"password",placeholder:"Password",className:"input sign-in-form__input",name:"password",value:o.password,onChange:h}),Object($.jsx)("div",{className:"sign-in-form__error-feedback",children:j.password})]}),Object($.jsxs)("div",{className:"sign-in-form__group-buttons",children:[Object($.jsx)("button",{type:"submit",className:"button button__prim",children:"Sign In"}),Object($.jsxs)("p",{className:"sign-in-form__group-buttons-text",children:["You are new? ",Object($.jsx)("span",{onClick:t,children:"Create new"})]})]})]})};var me=function(e,t){return{id:t,name:e.name,email:e.email,role:g}};var je=function(e){var t={};return oe.a.isLength(e.name,{min:2,max:30})||(t.name="Name must be between 2 and 30 characters"),oe.a.isEmpty(e.name)&&(t.name="Enter your name"),oe.a.isEmail(e.email)||(t.email="Email entered incorrectly"),oe.a.isEmpty(e.email)&&(t.email="Enter your email"),oe.a.isLength(e.password,{min:6,max:30})||(t.password="The password must be at least 6 characters long"),oe.a.isEmpty(e.password)&&(t.password="Enter password"),oe.a.isLength(e.password_confirmed,{min:6,max:30})||(t.password_confirmed="The password must be at least 6 characters long"),oe.a.equals(e.password,e.password_confirmed)||(t.password_confirmed="Password and confirm password must match"),oe.a.isEmpty(e.password_confirmed)&&(t.password_confirmed="Enter password"),{errors:t,isValid:u(t)}},be=function(e){var t=e.handleToggleButtonClick,a=e.setRegisterUserEmail,n=s.a.useState({name:"",email:"",password:"",password_confirmed:""}),c=Object(G.a)(n,2),r=c[0],i=c[1],o=s.a.useState({}),d=Object(G.a)(o,2),u=d[0],m=d[1],j=function(e){i(Object(l.a)(Object(l.a)({},r),{},Object(re.a)({},e.target.name,e.target.value))),m(Object(l.a)(Object(l.a)({},u),{},Object(re.a)({request:""},e.target.name,"")))};s.a.useEffect((function(){a("")}),[a]);return Object($.jsxs)("form",{className:"sign-up-form",onSubmit:function(e){e.preventDefault();var n=je(r),s=n.isValid,c=n.errors;if(s){var i={email:r.email,password:r.password};V.a.post("".concat(v,"/signup"),i).then((function(e){var t=e.data.accessToken,a=+Object(J.a)(t).sub,n=me(r,a);V.a.post("".concat(v,"/data-users"),n).catch((function(e){return m({request:e.response.data})}))})).then((function(){t(),a(i.email)})).catch((function(e){return m({request:e.response.data})}))}else m(c)},children:[Object($.jsx)("h2",{className:"sign-up-form__title",children:"Sign Up"}),Object($.jsx)("div",{className:"sign-up-form__error-request-feedback",children:u.request}),Object($.jsxs)("div",{className:"sign-up-form__group",children:[Object($.jsx)("input",{type:"text",placeholder:"Name",className:"input sign-up-form__input",name:"name",value:r.name,onChange:j}),Object($.jsx)("div",{className:"sign-up-form__error-feedback",children:u.name})]}),Object($.jsxs)("div",{className:"sign-up-form__group",children:[Object($.jsx)("input",{type:"text",placeholder:"Email",className:"input sign-up-form__input",name:"email",value:r.email,onChange:j}),Object($.jsx)("div",{className:"sign-up-form__error-feedback",children:u.email})]}),Object($.jsxs)("div",{className:"sign-up-form__group",children:[Object($.jsx)("input",{type:"password",placeholder:"Password",className:"input sign-up-form__input",name:"password",value:r.password,onChange:j}),Object($.jsx)("div",{className:"sign-up-form__error-feedback",children:u.password})]}),Object($.jsxs)("div",{className:"sign-up-form__group",children:[Object($.jsx)("input",{type:"password",placeholder:"Password confirmed",className:"input sign-up-form__input",name:"password_confirmed",value:r.password_confirmed,onChange:j}),Object($.jsx)("div",{className:"sign-up-form__error-feedback",children:u.password_confirmed})]}),Object($.jsxs)("div",{className:"sign-up-form__group-buttons",children:[Object($.jsx)("button",{type:"submit",className:"button button__prim",children:"Sign Up"}),Object($.jsxs)("p",{className:"sign-up-form__group-buttons-text",children:["Already have account? ",Object($.jsx)("span",{onClick:t,children:"Login"})]})]})]})},he=a(34),Oe=a.n(he),_e=a(59);var pe=function(e){return e>=10?"".concat(e,":00"):"0".concat(e,":00")},ge=function(e){var t=e.groupId,a=e.messageData,n=Object(i.c)((function(e){return e.auth.user.id})),c=(Object(i.c)((function(e){return e.auth.user.role})),Object(i.b)()),r=function(e){if(c({type:H,payload:a}),t){var n=new Date(t);c(ne(n))}c(ae(a.currentHour)),c(Z(e))};return Object($.jsxs)("div",{className:"card-message border_bottom",children:[Object($.jsx)("h3",{className:"card-message__time",children:pe(a.currentHour)}),Object($.jsx)("div",{className:"card-message__marker card-message__marker_".concat(a.role),children:a.role[0]}),Object($.jsx)("h4",{className:"card-message__email",children:a.email}),Object($.jsx)("div",{className:"card-message__message",children:a.message}),Object($.jsxs)("div",{className:"card-message__buttons",children:[Object($.jsx)("button",{className:"button button__prim",onClick:function(){return r(_)},children:"View"}),n===a.userId&&Object($.jsxs)(s.a.Fragment,{children:[Object($.jsx)("button",{className:"button button__prim",onClick:function(){return r(O)},children:"Update"}),Object($.jsx)("button",{className:"button button__prim",onClick:function(){V.a.delete("".concat(v,"/messages/").concat(a.id)).then((function(){c(te(n))}))},children:"Remove"})]})]})]})};var fe=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,s=t.getDate();return"".concat(s<10?"0"+s:s,"-").concat(n<10?"0"+n:n,"-").concat(a)},xe=function(e){var t=e.group;return Object($.jsxs)("div",{className:"segment-group",children:[Object($.jsx)("h3",{className:"segment-group__date",children:fe(t.groupId)}),t.messages.map((function(e,a){return e&&Object($.jsx)(ge,{messageData:e,groupId:t.groupId},a)}))]})};var ve=function(e){return e};var Ne=function(e){var t={};return e.startParam.match(x)||(t.startParam="Date entered in the wrong format"),e.endParam.match(x)||(t.endParam="Date entered in the wrong format"),u(e.startParam)&&(t.startParam="Enter the date"),u(e.endParam)&&(t.endParam="Enter the date"),{errors:t,isValid:u(t)}};function ye(e){return Array.from(new Set(e.map((function(e){return e.dayId})))).map((function(t){var a=t?{groupId:t}:null;return Object(l.a)(Object(l.a)({},a),{},{messages:e.filter((function(e){return e.dayId===t}))})}))}var we=function(e){var t=e.propsMessages,a=Object(i.c)((function(e){return e.messages})).messages,n=s.a.useState([]),c=Object(G.a)(n,2),r=c[0],o=c[1],d=s.a.useState({}),u=Object(G.a)(d,2),m=u[0],j=u[1],b=s.a.useState({startParam:"",endParam:""}),h=Object(G.a)(b,2),O=h[0],_=h[1];s.a.useEffect((function(){o(t||a)}),[a,t]);var p=function(e){var t;_(Object(l.a)(Object(l.a)({},O),{},Object(re.a)({},e.target.name,ve(e.target.value)))),j(Object(l.a)(Object(l.a)({},m),{},(t={},Object(re.a)(t,e.target.name,""),Object(re.a)(t,"warning",""),t)))};return Object($.jsxs)("div",{className:"segment",children:[Object($.jsxs)("div",{className:"segment__header border_bottom",children:[Object($.jsxs)("h2",{className:"segment__header-title",children:[r.length>1&&"Notes from ".concat(fe(r[0].dayId)," to ").concat(fe(r[r.length-1].dayId)),1===r.length&&"Notes for the ".concat(fe(r[0].dayId)),0===r.length&&"No notes"]}),Object($.jsxs)("form",{className:"filter-messages-form",onSubmit:function(e){e.preventDefault();var t=Ne(O),a=t.isValid,n=t.errors;if(a){var s=O.startParam.split("/"),c=O.endParam.split("/"),i=new Date(+s[2],+s[1]-1,+s[0]).getTime(),d=new Date(+c[2],+c[1]-1,+c[0]).getTime();if(i<d){var u=[d,i];i=u[0],d=u[1],_(Object(l.a)(Object(l.a)({},O),{},{startParam:O.endParam,endParam:O.startParam})),j(Object(l.a)(Object(l.a)({},m),{},{warning:"Dates are swapped"}))}var b=r.filter((function(e){return e.dayId<=i&&e.dayId>=d}));o(b)}else j(n)},children:[Object($.jsx)("div",{className:"filter-messages-form__warning-feedback",children:m.warning}),Object($.jsxs)("div",{className:"filter-messages-form__wrapper",children:[Object($.jsxs)("div",{className:"filter-messages-form__group",children:[Object($.jsx)("input",{className:"filter-messages-form__input",type:"text",name:"startParam",value:O.startParam,onChange:p,placeholder:"dd/mm/yyyy"}),Object($.jsx)("div",{className:"filter-messages-form__error-feedback",children:m.startParam})]}),Object($.jsxs)("div",{className:"filter-messages-form__group",children:[Object($.jsx)("input",{className:"filter-messages-form__input",type:"text",name:"endParam",value:O.endParam,onChange:p,placeholder:"dd/mm/yyyy"}),Object($.jsx)("div",{className:"filter-messages-form__error-feedback",children:m.endParam})]})]}),Object($.jsxs)("div",{className:"filter-messages-form__buttons",children:[Object($.jsx)("button",{className:"button button__prim filter-messages-form__button",children:"filter"}),Object($.jsx)("button",{type:"button",className:"button button__prim filter-messages-form__button",onClick:function(){o(t||a),j({})},children:"reset"})]})]})]}),r&&Object($.jsx)(s.a.Fragment,{children:ye(r).map((function(e,t){return Object($.jsx)(xe,{group:e},t)}))})]})},De=function(){var e=Object(X.g)().params.userId,t=s.a.useState(null),a=Object(G.a)(t,2),n=a[0],c=a[1],r=s.a.useState(null),i=Object(G.a)(r,2),o=i[0],d=i[1],u=function(){var t=Object(_e.a)(Oe.a.mark((function t(){var a,s;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.a.get("".concat(v,"/data-users/").concat(e));case 3:return a=t.sent,t.next=6,V.a.get("".concat(v,"/messages?userId=").concat(e,"&_sort=dayId,currentHour&_order=asc"));case 6:s=t.sent,c(Object(l.a)({},a.data)),d(s.data),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:return t.prev=13,console.log(n),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,11,13,16]])})));return function(){return t.apply(this,arguments)}}();s.a.useEffect((function(){u()}),[e]);var m=function(e){var t=Object(l.a)(Object(l.a)({},n),{},{role:e});V.a.put("".concat(v,"/data-users/").concat(n.id),t).then((function(){u()})),console.log("\u0421\u043c\u0435\u043d\u0430 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(n.email," \u0441 ").concat(n.role," \u043d\u0430 ").concat(e," \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043b\u0438\u0441\u0442 users"))};return o&&n?Object($.jsxs)(s.a.Fragment,{children:[Object($.jsx)("div",{className:"user-update",children:Object($.jsxs)("div",{className:"user-update__group",children:[Object($.jsx)("h2",{className:"user-update-role__email",children:n.email}),Object($.jsxs)("div",{className:"user-update-role__buttons",children:[Object($.jsx)("button",{className:"button button__add ".concat(n.role===g?"button_selected":""),onClick:function(){return m(g)},children:g}),Object($.jsx)("button",{className:"button button__add ".concat(n.role===p?"button_selected":""),onClick:function(){return m(p)},children:p})]})]})}),Object($.jsx)(we,{propsMessages:o})]}):Object($.jsx)(ze,{})},ke=function(e){var t=e.currentHour,a=Object(i.c)((function(e){return e.auth.user})).role,n=Object(i.b)();return Object($.jsxs)("div",{className:"card-message border_bottom",children:[Object($.jsx)("h3",{className:"card-message__time",children:pe(t)}),Object($.jsx)("div",{className:"card-message__message",children:"Add note..."}),Object($.jsx)("div",{className:"card-message__buttons",children:f!==a&&Object($.jsx)("button",{className:"button button__prim",onClick:function(){n(ae(t)),n(Z(h))},children:"Add"})})]})},Se=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.idSelectedDate,a=e.selectedDate,n=Object(i.c)((function(e){return e.messages})).messages,s=Object(i.c)((function(e){return e.auth.user})).id,c=n.filter((function(e){return e.dayId===t&&e.userId===s}));return Object($.jsxs)("div",{className:"day-list",children:[Object($.jsx)("div",{className:"day-list__header border_bottom",children:Object($.jsx)("div",{className:"day-list__day-name",children:fe(a.getTime())})}),Object($.jsx)("div",{className:"day-list__group",children:Array(24).fill(null).map((function(e,t){var a=c.find((function(e){return e.currentHour===t}));return a?Object($.jsx)(ge,{messageData:a},t):Object($.jsx)(ke,{currentHour:t},t)}))})]})},Ee=Object(X.h)((function(e){var t=e.history,a=e.dayData,n=a.date,c=a.isCurrentMonth,r=Object(i.c)((function(e){return e.messages})).messages,o=Object(i.c)((function(e){return e.auth.user})).id,d=Object(i.b)(),l=Object(X.g)().path,m=s.a.useState([]),j=Object(G.a)(m,2),b=j[0],h=j[1];s.a.useEffect((function(){h([]);var e=r.filter((function(e){return e.dayId===n.getTime()&&e.userId===o})).slice(0,3);u(e)||h(e)}),[n,o,r]);return Object($.jsxs)("div",{className:"month-list__day",children:[Object($.jsx)("div",{className:"month-list__day-header ".concat(c?"month-list__day-header_current":"month-list__day-header_other"),onClick:function(){d(ne(n)),t.push("".concat(l,"/day"))},children:Object($.jsx)("div",{className:"month-list__day-number",children:n.getDate()})}),Object($.jsx)("ul",{className:"month-list__day-tasks",children:!u(b)&&b.map((function(e,t){return Object($.jsxs)("li",{className:"month-list__day-task",children:[Object($.jsx)("h3",{className:"month-list__day-task-time",children:pe(e.currentHour)}),Object($.jsx)("p",{className:"month-list__day-task-text",children:e.message})]},t)}))})]})})),Te=Object(X.h)((function(e){var t=e.weekData,a=e.weekNumber;return Object($.jsx)("div",{className:"month-list__week border_bottom",children:t.map((function(e,t){return Object($.jsx)(Ee,{dayData:e},t)}))},a)})),Ce=function(){var e=Object(i.c)((function(e){return e.calendar})).data;return Object($.jsxs)("div",{className:"month-list",children:[Object($.jsx)("div",{className:"month-list__header border_bottom",children:y.map((function(e,t){return Object($.jsx)("span",{className:"month-list__day-name",children:e},t)}))}),null===e||void 0===e?void 0:e.map((function(e,t){return Object($.jsx)(Te,{weekData:e,weekNumber:t},t)}))]})},Ie=function(){return Object($.jsx)("div",{className:"calendar",children:Object($.jsxs)(X.d,{children:[Object($.jsx)(X.b,{exact:!0,path:"/calendar",component:Ce}),Object($.jsx)(X.b,{exact:!0,path:"/calendar/user-data/:userId",component:De}),Object($.jsx)(X.b,{exact:!0,path:"/calendar/segment",component:we}),Object($.jsx)(X.b,{exact:!0,path:"/calendar/day",component:Se})]})})},Ae=Object(X.h)((function(e){var t=e.history,a=e.dayData,n=a.date,s=a.isCurrentMonth,c=Object(X.g)().path,r=Object(i.b)(),o=Object(i.c)((function(e){return e.calendar})),d=o.selectedDate,l=o.currentDate.getTime()===n.getTime(),u=d&&d.getTime()===n.getTime();return Object($.jsx)("div",{className:"widget-month__day \n      ".concat(s?"":"widget-month__day_shadowed"," \n      ").concat(l?"widget-month__day_current":"","\n      ").concat(u?"widget-month__day_selected":""),onClick:function(){r(ne(n)),t.push("".concat(c,"/day"))},children:Object($.jsx)("span",{className:"widget-month__day__number",children:n.getDate()})})})),Me=Object(X.h)((function(e){var t=e.weekData,a=e.weekNumber;return Object($.jsx)("div",{className:"widget-month__week",children:t.map((function(e,t){return Object($.jsx)(Ae,{dayData:e},t)}))},a)})),Pe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.calendar})).basicDate;return Object($.jsxs)("div",{className:"month-toggle",children:[Object($.jsx)("button",{className:"month-toggle__button",onClick:function(){var a=new Date(t.getFullYear(),t.getMonth()-1);e(se(a))},children:"\u276e"}),Object($.jsx)("button",{className:"month-toggle__button",onClick:function(){var a=new Date(t.getFullYear(),t.getMonth()+1);e(se(a))},children:"\u276f"})]})},Le=function(){var e=Object(i.c)((function(e){return e.calendar})),t=e.basicDate,a=e.data;return Object($.jsxs)("div",{className:"widget-month border_bottom",children:[Object($.jsxs)("div",{className:"widget-month__header border_bottom",children:[Object($.jsxs)("h3",{className:"widget-month__date",children:[N[t.getMonth()]," ",t.getFullYear()]}),Object($.jsx)(Pe,{})]}),Object($.jsxs)("div",{className:"widget-month__list border_bottom",children:[Object($.jsx)("div",{className:"widget-month__list-header",children:y.map((function(e,t){return Object($.jsx)("span",{className:"widget-month__day-name",children:e},t)}))}),a.map((function(e,t){return Object($.jsx)(Me,{weekData:e,weekNumber:t},t)}))]})]})},He=function(e){var t=e.user,a=Object(X.g)().path;return console.log(a),Object($.jsx)("li",{className:"user user_decor-".concat(t.role),children:Object($.jsx)(W.b,{to:"".concat(a,"/user-data/").concat(t.id),children:Object($.jsx)("h4",{className:"user__email",children:t.email})})})},Fe=function(){var e=Object(i.c)((function(e){return e.auth.user})).id,t=s.a.useState(!1),a=Object(G.a)(t,2),n=a[0],c=a[1],r=s.a.useState([]),o=Object(G.a)(r,2),d=o[0],l=o[1],u=s.a.useCallback((function(){V.a.get("".concat(v,"/data-users/?id_ne=").concat(e)).then((function(e){var t=e.data;l(t),c(!0)}))}),[e]);return s.a.useEffect((function(){u()}),[u]),Object($.jsxs)("div",{className:"users-list",children:[Object($.jsx)("h2",{className:"users-list__title border_bottom",children:"All users"}),n?Object($.jsx)("ul",{className:"users-list__users border_bottom",children:d.map((function(e,t){return Object($.jsx)(He,{user:e},t)}))}):Object($.jsx)("div",{children:"Loading"})]})},Ue=function(e){var t=e.isOpenSideBar,a=Object(i.c)((function(e){return e.auth.user})),n=a.role,s=a.email;return Object($.jsx)("div",{className:"side-bar ".concat(t?"side-bar_visible":""),children:Object($.jsxs)("div",{className:"side-bar__wrapper",children:[Object($.jsx)("h2",{className:"side-bar__email border_bottom",children:s}),Object($.jsx)(Le,{}),n===p?Object($.jsx)(Fe,{}):null]})})},Be=function(e){var t=e.isOpenSideBar,a=e.setIsOpenSideBar,n=Object(i.b)(),s=Object(i.c)((function(e){return e.calendar})),c=s.basicDate,r=s.currentDate,o=Object(i.c)((function(e){return e.auth.user})).email;return Object($.jsx)("header",{className:"header border_bottom",children:Object($.jsx)("div",{className:"wrapper",children:Object($.jsxs)("div",{className:"header__wrapper",children:[Object($.jsxs)("div",{className:"header__group",children:[Object($.jsx)("span",{className:"hamburger",onClick:function(){a(!t)},children:Object($.jsx)("span",{className:"hamburger__line"})}),Object($.jsx)("h2",{className:"header__email",children:o}),Object($.jsx)(Pe,{}),Object($.jsxs)("h2",{className:"header__date",children:[N[c.getMonth()]," ",c.getFullYear()]}),Object($.jsx)(W.b,{to:"/calendar",className:"button header__button button__add",children:"calendar"}),Object($.jsx)(W.b,{to:"/calendar/segment",className:"button header__button button__add",children:"all notes"}),Object($.jsx)(W.b,{to:"/calendar/day",className:"button header__button button__add",onClick:function(){n(ne(r)),n(se(r))},children:"today"})]}),Object($.jsx)(W.b,{to:"/logout",className:"button header__button button__add",children:"logout"})]})})})};function qe(){var e=Object(i.c)((function(e){return e.modal.modalData})),t=Object(i.c)((function(e){return e.calendar})),a=t.idSelectedDate,n=t.currentHour,s=Object(i.c)((function(e){return e.auth.user})),c=s.email,r=s.id,o=s.role;return u(e)?{userId:r,title:"",message:"",currentHour:n,email:c,role:o,dayId:a}:e}var Re=function(){var e=Object(i.b)(),t=qe(),a=Object(i.c)((function(e){return e.modal})).modalType,n=s.a.useState(t),c=Object(G.a)(n,2),r=c[0],o=c[1],d=function(e){o(Object(l.a)(Object(l.a)({},r),{},Object(re.a)({},e.target.name,e.target.value)))},m=function(){u(r.message)||(r.id?V.a.put("".concat(v,"/messages/").concat(r.id),r).then((function(){e(te(r.userId)),e(ae(null)),e(ee())})):V.a.post("".concat(v,"/messages"),r).then((function(){e(te(r.userId)),e(ae(null)),e(ee())})))};return Object($.jsxs)("div",{className:"add-update-message-card",children:[Object($.jsxs)("div",{className:"add-update-message-card__header",children:[Object($.jsxs)("h3",{className:"add-update-message-card__date",children:["Date: ",fe(r.dayId),Object($.jsx)("br",{}),Object($.jsx)("br",{}),"Time: ",pe(r.currentHour)]}),Object($.jsx)("h3",{className:"add-update-message-card__author",children:r.email})]}),Object($.jsx)("input",{type:"text",placeholder:"title",className:"input add-update-message-card__input",name:"title",value:r.title,onChange:d}),Object($.jsx)("textarea",{placeholder:"note",className:"input add-update-message-card__textarea",name:"message",value:r.message,onChange:d}),Object($.jsxs)("div",{className:"add-update-message-card__buttons",children:[O===a&&Object($.jsx)("button",{className:"button button__prim",onClick:m,children:"update"}),h===a&&Object($.jsx)("button",{className:"button button__prim",onClick:m,children:"add"})]})]})};var Ye=function(){var e=qe();return Object($.jsxs)("div",{className:"view-message-card",children:[Object($.jsxs)("div",{className:"view-message-card__header",children:[Object($.jsxs)("h3",{className:"view-message-card__date",children:["Date: ",fe(e.dayId),Object($.jsx)("br",{}),Object($.jsx)("br",{}),"Time: ",pe(e.currentHour)]}),Object($.jsx)("h3",{className:"view-message-card__author",children:e.email})]}),Object($.jsx)("h2",{className:"view-message-card__title",children:e.title}),Object($.jsx)("p",{className:"view-message-card__text",children:e.message})]})};var Ve=function(){var e=Object(i.c)((function(e){return e.modal})).modalType,t=Object(i.b)();return Object($.jsx)("div",{className:"modal modal_visibility",children:Object($.jsxs)("div",{className:"modal__wrapper",children:[Object($.jsx)("span",{className:"modal__close-button",onClick:function(){t(ae(null)),t(ee())}}),h===e&&Object($.jsx)(Re,{}),O===e&&Object($.jsx)(Re,{}),_===e&&Object($.jsx)(Ye,{})]})})},Je=function(){var e=s.a.useState(!1),t=Object(G.a)(e,2),a=t[0],n=t[1],c=s.a.useState(""),r=Object(G.a)(c,2),o=r[0],d=r[1],l=function(){n(!a)};return Object(i.c)((function(e){return e.auth.isAuthenticated}))?Object($.jsx)(X.a,{exact:!0,to:"/calendar"}):Object($.jsx)("div",{className:"login",children:Object($.jsx)("div",{className:"wrapper",children:Object($.jsxs)("div",{className:"login__wrapper",children:[Object($.jsx)(W.b,{to:"/",className:"button login__button button__add",children:"landing page"}),a?Object($.jsx)(be,{handleToggleButtonClick:l,setRegisterUserEmail:d}):Object($.jsx)(ue,{handleToggleButtonClick:l,registerUserEmail:o})]})})})},We=function(){var e=Object(i.b)();return s.a.useEffect((function(){localStorage.removeItem("accessToken"),le(!1),e(K({}))}),[e]),Object($.jsx)(X.a,{exact:!0,to:"/"})},Xe=function(){var e=s.a.useState(!1),t=Object(G.a)(e,2),a=t[0],n=t[1],c=Object(X.g)();return a?Object($.jsx)(X.a,{exact:!0,to:c.url}):Object($.jsx)("div",{className:"not-found",children:Object($.jsx)("div",{className:"wrapper",children:Object($.jsxs)("div",{className:"not-found__wrapper",children:[Object($.jsx)("h2",{className:"not-found__title",children:"NotFound"}),Object($.jsx)("button",{className:"button button__add",onClick:function(){n(!0)},children:"to home"})]})})})},$e=function(){var e=Object(i.c)((function(e){return e.auth})).isAuthenticated,t=Object(i.c)((function(e){return e.modal})).isOpenModal,a=s.a.useState(!0),n=Object(G.a)(a,2),c=n[0],r=n[1];return e?Object($.jsxs)(ce,{children:[Object($.jsx)(Be,{isOpenSideBar:c,setIsOpenSideBar:r}),Object($.jsx)("div",{className:"main",children:Object($.jsx)("div",{className:"wrapper",children:Object($.jsxs)("div",{className:"main__wrapper",children:[Object($.jsx)(Ue,{isOpenSideBar:c}),Object($.jsx)(Ie,{})]})})}),t&&Object($.jsx)(Ve,{})]}):Object($.jsx)(X.a,{to:"/login"})},ze=function(){return Object($.jsx)("div",{className:"loading",children:Object($.jsx)("h2",{className:"loading__title",children:"Loading"})})},Ge=(a(167),function(){var e=Object(i.b)();return s.a.useEffect((function(){if(localStorage.accessToken){var t=Object(J.a)(localStorage.accessToken),a=t.sub,n=Date.now()/1e3;t.exp<n?(localStorage.removeItem("accessToken"),le(!1),e(K({}))):(le(localStorage.accessToken),V.a.get("".concat(v,"/data-users/").concat(a)).then((function(t){e(K(t.data))})).catch((function(){console.log("\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u043f\u043e\u0437\u0436\u0435...")})))}}),[e]),Object($.jsx)("div",{className:"App",children:Object($.jsx)(W.a,{children:Object($.jsxs)(X.d,{children:[Object($.jsx)(X.b,{exact:!0,path:"/",component:z}),Object($.jsx)(X.b,{path:"/calendar",component:$e}),Object($.jsx)(X.b,{exact:!0,path:"/login",component:Je}),Object($.jsx)(X.b,{exact:!0,path:"/logout",component:We}),Object($.jsx)(X.b,{component:Xe})]})})})});r.a.render(Object($.jsx)(i.a,{store:R,children:Object($.jsx)(Ge,{})}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.5df15b16.chunk.js.map